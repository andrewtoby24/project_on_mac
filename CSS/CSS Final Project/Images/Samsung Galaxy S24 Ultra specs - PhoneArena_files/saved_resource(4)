/* Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
(function(window,document,exportName,undefined){'use strict';var VENDOR_PREFIXES=['','webkit','Moz','MS','ms','o'];var TEST_ELEMENT=document.createElement('div');var TYPE_FUNCTION='function';var round=Math.round;var abs=Math.abs;var now=Date.now;function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout);}
function invokeArrayArg(arg,fn,context){if(Array.isArray(arg)){each(arg,context[fn],context);return true;}
return false;}
function each(obj,iterator,context){var i;if(!obj){return;}
if(obj.forEach){obj.forEach(iterator,context);}else if(obj.length!==undefined){i=0;while(i<obj.length){iterator.call(context,obj[i],i,obj);i++;}}else{for(i in obj){obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj);}}}
function deprecate(method,name,message){var deprecationMessage='DEPRECATED METHOD: '+name+'\n'+message+' AT \n';return function(){var e=new Error('get-stack-trace');var stack=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,'').replace(/^\s+at\s+/gm,'').replace(/^Object.<anonymous>\s*\(/gm,'{anonymous}()@'):'Unknown Stack Trace';var log=window.console&&(window.console.warn||window.console.log);if(log){log.call(window.console,deprecationMessage,stack);}
return method.apply(this,arguments);};}
var assign;if(typeof Object.assign!=='function'){assign=function assign(target){if(target===undefined||target===null){throw new TypeError('Cannot convert undefined or null to object');}
var output=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&source!==null){for(var nextKey in source){if(source.hasOwnProperty(nextKey)){output[nextKey]=source[nextKey];}}}}
return output;};}else{assign=Object.assign;}
var extend=deprecate(function extend(dest,src,merge){var keys=Object.keys(src);var i=0;while(i<keys.length){if(!merge||(merge&&dest[keys[i]]===undefined)){dest[keys[i]]=src[keys[i]];}
i++;}
return dest;},'extend','Use `assign`.');var merge=deprecate(function merge(dest,src){return extend(dest,src,true);},'merge','Use `assign`.');function inherit(child,base,properties){var baseP=base.prototype,childP;childP=child.prototype=Object.create(baseP);childP.constructor=child;childP._super=baseP;if(properties){assign(childP,properties);}}
function bindFn(fn,context){return function boundFn(){return fn.apply(context,arguments);};}
function boolOrFn(val,args){if(typeof val==TYPE_FUNCTION){return val.apply(args?args[0]||undefined:undefined,args);}
return val;}
function ifUndefined(val1,val2){return(val1===undefined)?val2:val1;}
function addEventListeners(target,types,handler){each(splitStr(types),function(type){target.addEventListener(type,handler,false);});}
function removeEventListeners(target,types,handler){each(splitStr(types),function(type){target.removeEventListener(type,handler,false);});}
function hasParent(node,parent){while(node){if(node==parent){return true;}
node=node.parentNode;}
return false;}
function inStr(str,find){return str.indexOf(find)>-1;}
function splitStr(str){return str.trim().split(/\s+/g);}
function inArray(src,find,findByKey){if(src.indexOf&&!findByKey){return src.indexOf(find);}else{var i=0;while(i<src.length){if((findByKey&&src[i][findByKey]==find)||(!findByKey&&src[i]===find)){return i;}
i++;}
return-1;}}
function toArray(obj){return Array.prototype.slice.call(obj,0);}
function uniqueArray(src,key,sort){var results=[];var values=[];var i=0;while(i<src.length){var val=key?src[i][key]:src[i];if(inArray(values,val)<0){results.push(src[i]);}
values[i]=val;i++;}
if(sort){if(!key){results=results.sort();}else{results=results.sort(function sortUniqueArray(a,b){return a[key]>b[key];});}}
return results;}
function prefixed(obj,property){var prefix,prop;var camelProp=property[0].toUpperCase()+property.slice(1);var i=0;while(i<VENDOR_PREFIXES.length){prefix=VENDOR_PREFIXES[i];prop=(prefix)?prefix+camelProp:property;if(prop in obj){return prop;}
i++;}
return undefined;}
var _uniqueId=1;function uniqueId(){return _uniqueId++;}
function getWindowForElement(element){var doc=element.ownerDocument||element;return(doc.defaultView||doc.parentWindow||window);}
var MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i;var SUPPORT_TOUCH=('ontouchstart'in window);var SUPPORT_POINTER_EVENTS=prefixed(window,'PointerEvent')!==undefined;var SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&MOBILE_REGEX.test(navigator.userAgent);var INPUT_TYPE_TOUCH='touch';var INPUT_TYPE_PEN='pen';var INPUT_TYPE_MOUSE='mouse';var INPUT_TYPE_KINECT='kinect';var COMPUTE_INTERVAL=25;var INPUT_START=1;var INPUT_MOVE=2;var INPUT_END=4;var INPUT_CANCEL=8;var DIRECTION_NONE=1;var DIRECTION_LEFT=2;var DIRECTION_RIGHT=4;var DIRECTION_UP=8;var DIRECTION_DOWN=16;var DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT;var DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN;var DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL;var PROPS_XY=['x','y'];var PROPS_CLIENT_XY=['clientX','clientY'];function Input(manager,callback){var self=this;this.manager=manager;this.callback=callback;this.element=manager.element;this.target=manager.options.inputTarget;this.domHandler=function(ev){if(boolOrFn(manager.options.enable,[manager])){self.handler(ev);}};this.init();}
Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler);},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler);}};function createInputInstance(manager){var Type;var inputClass=manager.options.inputClass;if(inputClass){Type=inputClass;}else if(SUPPORT_POINTER_EVENTS){Type=PointerEventInput;}else if(SUPPORT_ONLY_TOUCH){Type=TouchInput;}else if(!SUPPORT_TOUCH){Type=MouseInput;}else{Type=TouchMouseInput;}
return new(Type)(manager,inputHandler);}
function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length;var changedPointersLen=input.changedPointers.length;var isFirst=(eventType&INPUT_START&&(pointersLen-changedPointersLen===0));var isFinal=(eventType&(INPUT_END|INPUT_CANCEL)&&(pointersLen-changedPointersLen===0));input.isFirst=!!isFirst;input.isFinal=!!isFinal;if(isFirst){manager.session={};}
input.eventType=eventType;computeInputData(manager,input);manager.emit('hammer.input',input);manager.recognize(input);manager.session.prevInput=input;}
function computeInputData(manager,input){var session=manager.session;var pointers=input.pointers;var pointersLength=pointers.length;if(!session.firstInput){session.firstInput=simpleCloneInputData(input);}
if(pointersLength>1&&!session.firstMultiple){session.firstMultiple=simpleCloneInputData(input);}else if(pointersLength===1){session.firstMultiple=false;}
var firstInput=session.firstInput;var firstMultiple=session.firstMultiple;var offsetCenter=firstMultiple?firstMultiple.center:firstInput.center;var center=input.center=getCenter(pointers);input.timeStamp=now();input.deltaTime=input.timeStamp-firstInput.timeStamp;input.angle=getAngle(offsetCenter,center);input.distance=getDistance(offsetCenter,center);computeDeltaXY(session,input);input.offsetDirection=getDirection(input.deltaX,input.deltaY);var overallVelocity=getVelocity(input.deltaTime,input.deltaX,input.deltaY);input.overallVelocityX=overallVelocity.x;input.overallVelocityY=overallVelocity.y;input.overallVelocity=(abs(overallVelocity.x)>abs(overallVelocity.y))?overallVelocity.x:overallVelocity.y;input.scale=firstMultiple?getScale(firstMultiple.pointers,pointers):1;input.rotation=firstMultiple?getRotation(firstMultiple.pointers,pointers):0;input.maxPointers=!session.prevInput?input.pointers.length:((input.pointers.length>session.prevInput.maxPointers)?input.pointers.length:session.prevInput.maxPointers);computeIntervalInputData(session,input);var target=manager.element;if(hasParent(input.srcEvent.target,target)){target=input.srcEvent.target;}
input.target=target;}
function computeDeltaXY(session,input){var center=input.center;var offset=session.offsetDelta||{};var prevDelta=session.prevDelta||{};var prevInput=session.prevInput||{};if(input.eventType===INPUT_START||prevInput.eventType===INPUT_END){prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0};offset=session.offsetDelta={x:center.x,y:center.y};}
input.deltaX=prevDelta.x+(center.x-offset.x);input.deltaY=prevDelta.y+(center.y-offset.y);}
function computeIntervalInputData(session,input){var last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp,velocity,velocityX,velocityY,direction;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=input.deltaX-last.deltaX;var deltaY=input.deltaY-last.deltaY;var v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x;velocityY=v.y;velocity=(abs(v.x)>abs(v.y))?v.x:v.y;direction=getDirection(deltaX,deltaY);session.lastInterval=input;}else{velocity=last.velocity;velocityX=last.velocityX;velocityY=last.velocityY;direction=last.direction;}
input.velocity=velocity;input.velocityX=velocityX;input.velocityY=velocityY;input.direction=direction;}
function simpleCloneInputData(input){var pointers=[];var i=0;while(i<input.pointers.length){pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)};i++;}
return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY};}
function getCenter(pointers){var pointersLength=pointers.length;if(pointersLength===1){return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};}
var x=0,y=0,i=0;while(i<pointersLength){x+=pointers[i].clientX;y+=pointers[i].clientY;i++;}
return{x:round(x/pointersLength),y:round(y/pointersLength)};}
function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0};}
function getDirection(x,y){if(x===y){return DIRECTION_NONE;}
if(abs(x)>=abs(y)){return x<0?DIRECTION_LEFT:DIRECTION_RIGHT;}
return y<0?DIRECTION_UP:DIRECTION_DOWN;}
function getDistance(p1,p2,props){if(!props){props=PROPS_XY;}
var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt((x*x)+(y*y));}
function getAngle(p1,p2,props){if(!props){props=PROPS_XY;}
var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.atan2(y,x)*180/Math.PI;}
function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)+getAngle(start[1],start[0],PROPS_CLIENT_XY);}
function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY);}
var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END};var MOUSE_ELEMENT_EVENTS='mousedown';var MOUSE_WINDOW_EVENTS='mousemove mouseup';function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS;this.evWin=MOUSE_WINDOW_EVENTS;this.pressed=false;Input.apply(this,arguments);}
inherit(MouseInput,Input,{handler:function MEhandler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];if(eventType&INPUT_START&&ev.button===0){this.pressed=true;}
if(eventType&INPUT_MOVE&&ev.which!==1){eventType=INPUT_END;}
if(!this.pressed){return;}
if(eventType&INPUT_END){this.pressed=false;}
this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:INPUT_TYPE_MOUSE,srcEvent:ev});}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL};var IE10_POINTER_TYPE_ENUM={2:INPUT_TYPE_TOUCH,3:INPUT_TYPE_PEN,4:INPUT_TYPE_MOUSE,5:INPUT_TYPE_KINECT};var POINTER_ELEMENT_EVENTS='pointerdown';var POINTER_WINDOW_EVENTS='pointermove pointerup pointercancel';if(window.MSPointerEvent&&!window.PointerEvent){POINTER_ELEMENT_EVENTS='MSPointerDown';POINTER_WINDOW_EVENTS='MSPointerMove MSPointerUp MSPointerCancel';}
function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS;this.evWin=POINTER_WINDOW_EVENTS;Input.apply(this,arguments);this.store=(this.manager.session.pointerEvents=[]);}
inherit(PointerEventInput,Input,{handler:function PEhandler(ev){var store=this.store;var removePointer=false;var eventTypeNormalized=ev.type.toLowerCase().replace('ms','');var eventType=POINTER_INPUT_MAP[eventTypeNormalized];var pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType;var isTouch=(pointerType==INPUT_TYPE_TOUCH);var storeIndex=inArray(store,ev.pointerId,'pointerId');if(eventType&INPUT_START&&(ev.button===0||isTouch)){if(storeIndex<0){store.push(ev);storeIndex=store.length-1;}}else if(eventType&(INPUT_END|INPUT_CANCEL)){removePointer=true;}
if(storeIndex<0){return;}
store[storeIndex]=ev;this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev});if(removePointer){store.splice(storeIndex,1);}}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var SINGLE_TOUCH_TARGET_EVENTS='touchstart';var SINGLE_TOUCH_WINDOW_EVENTS='touchstart touchmove touchend touchcancel';function SingleTouchInput(){this.evTarget=SINGLE_TOUCH_TARGET_EVENTS;this.evWin=SINGLE_TOUCH_WINDOW_EVENTS;this.started=false;Input.apply(this,arguments);}
inherit(SingleTouchInput,Input,{handler:function TEhandler(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];if(type===INPUT_START){this.started=true;}
if(!this.started){return;}
var touches=normalizeSingleTouches.call(this,ev,type);if(type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length===0){this.started=false;}
this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev});}});function normalizeSingleTouches(ev,type){var all=toArray(ev.touches);var changed=toArray(ev.changedTouches);if(type&(INPUT_END|INPUT_CANCEL)){all=uniqueArray(all.concat(changed),'identifier',true);}
return[all,changed];}
var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var TOUCH_TARGET_EVENTS='touchstart touchmove touchend touchcancel';function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS;this.targetIds={};Input.apply(this,arguments);}
inherit(TouchInput,Input,{handler:function MTEhandler(ev){var type=TOUCH_INPUT_MAP[ev.type];var touches=getTouches.call(this,ev,type);if(!touches){return;}
this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev});}});function getTouches(ev,type){var allTouches=toArray(ev.touches);var targetIds=this.targetIds;if(type&(INPUT_START|INPUT_MOVE)&&allTouches.length===1){targetIds[allTouches[0].identifier]=true;return[allTouches,allTouches];}
var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;targetTouches=allTouches.filter(function(touch){return hasParent(touch.target,target);});if(type===INPUT_START){i=0;while(i<targetTouches.length){targetIds[targetTouches[i].identifier]=true;i++;}}
i=0;while(i<changedTouches.length){if(targetIds[changedTouches[i].identifier]){changedTargetTouches.push(changedTouches[i]);}
if(type&(INPUT_END|INPUT_CANCEL)){delete targetIds[changedTouches[i].identifier];}
i++;}
if(!changedTargetTouches.length){return;}
return[uniqueArray(targetTouches.concat(changedTargetTouches),'identifier',true),changedTargetTouches];}
var DEDUP_TIMEOUT=2500;var DEDUP_DISTANCE=25;function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler);this.mouse=new MouseInput(this.manager,handler);this.primaryTouch=null;this.lastTouches=[];}
inherit(TouchMouseInput,Input,{handler:function TMEhandler(manager,inputEvent,inputData){var isTouch=(inputData.pointerType==INPUT_TYPE_TOUCH),isMouse=(inputData.pointerType==INPUT_TYPE_MOUSE);if(isMouse&&inputData.sourceCapabilities&&inputData.sourceCapabilities.firesTouchEvents){return;}
if(isTouch){recordTouches.call(this,inputEvent,inputData);}else if(isMouse&&isSyntheticEvent.call(this,inputData)){return;}
this.callback(manager,inputEvent,inputData);},destroy:function destroy(){this.touch.destroy();this.mouse.destroy();}});function recordTouches(eventType,eventData){if(eventType&INPUT_START){this.primaryTouch=eventData.changedPointers[0].identifier;setLastTouch.call(this,eventData);}else if(eventType&(INPUT_END|INPUT_CANCEL)){setLastTouch.call(this,eventData);}}
function setLastTouch(eventData){var touch=eventData.changedPointers[0];if(touch.identifier===this.primaryTouch){var lastTouch={x:touch.clientX,y:touch.clientY};this.lastTouches.push(lastTouch);var lts=this.lastTouches;var removeLastTouch=function(){var i=lts.indexOf(lastTouch);if(i>-1){lts.splice(i,1);}};setTimeout(removeLastTouch,DEDUP_TIMEOUT);}}
function isSyntheticEvent(eventData){var x=eventData.srcEvent.clientX,y=eventData.srcEvent.clientY;for(var i=0;i<this.lastTouches.length;i++){var t=this.lastTouches[i];var dx=Math.abs(x-t.x),dy=Math.abs(y-t.y);if(dx<=DEDUP_DISTANCE&&dy<=DEDUP_DISTANCE){return true;}}
return false;}
var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,'touchAction');var NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined;var TOUCH_ACTION_COMPUTE='compute';var TOUCH_ACTION_AUTO='auto';var TOUCH_ACTION_MANIPULATION='manipulation';var TOUCH_ACTION_NONE='none';var TOUCH_ACTION_PAN_X='pan-x';var TOUCH_ACTION_PAN_Y='pan-y';var TOUCH_ACTION_MAP=getTouchActionProps();function TouchAction(manager,value){this.manager=manager;this.set(value);}
TouchAction.prototype={set:function(value){if(value==TOUCH_ACTION_COMPUTE){value=this.compute();}
if(NATIVE_TOUCH_ACTION&&this.manager.element.style&&TOUCH_ACTION_MAP[value]){this.manager.element.style[PREFIXED_TOUCH_ACTION]=value;}
this.actions=value.toLowerCase().trim();},update:function(){this.set(this.manager.options.touchAction);},compute:function(){var actions=[];each(this.manager.recognizers,function(recognizer){if(boolOrFn(recognizer.options.enable,[recognizer])){actions=actions.concat(recognizer.getTouchAction());}});return cleanTouchActions(actions.join(' '));},preventDefaults:function(input){var srcEvent=input.srcEvent;var direction=input.offsetDirection;if(this.manager.session.prevented){srcEvent.preventDefault();return;}
var actions=this.actions;var hasNone=inStr(actions,TOUCH_ACTION_NONE)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];if(hasNone){var isTapPointer=input.pointers.length===1;var isTapMovement=input.distance<2;var isTapTouchTime=input.deltaTime<250;if(isTapPointer&&isTapMovement&&isTapTouchTime){return;}}
if(hasPanX&&hasPanY){return;}
if(hasNone||(hasPanY&&direction&DIRECTION_HORIZONTAL)||(hasPanX&&direction&DIRECTION_VERTICAL)){return this.preventSrc(srcEvent);}},preventSrc:function(srcEvent){this.manager.session.prevented=true;srcEvent.preventDefault();}};function cleanTouchActions(actions){if(inStr(actions,TOUCH_ACTION_NONE)){return TOUCH_ACTION_NONE;}
var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);if(hasPanX&&hasPanY){return TOUCH_ACTION_NONE;}
if(hasPanX||hasPanY){return hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y;}
if(inStr(actions,TOUCH_ACTION_MANIPULATION)){return TOUCH_ACTION_MANIPULATION;}
return TOUCH_ACTION_AUTO;}
function getTouchActionProps(){if(!NATIVE_TOUCH_ACTION){return false;}
var touchMap={};var cssSupports=window.CSS&&window.CSS.supports;['auto','manipulation','pan-y','pan-x','pan-x pan-y','none'].forEach(function(val){touchMap[val]=cssSupports?window.CSS.supports('touch-action',val):true;});return touchMap;}
var STATE_POSSIBLE=1;var STATE_BEGAN=2;var STATE_CHANGED=4;var STATE_ENDED=8;var STATE_RECOGNIZED=STATE_ENDED;var STATE_CANCELLED=16;var STATE_FAILED=32;function Recognizer(options){this.options=assign({},this.defaults,options||{});this.id=uniqueId();this.manager=null;this.options.enable=ifUndefined(this.options.enable,true);this.state=STATE_POSSIBLE;this.simultaneous={};this.requireFail=[];}
Recognizer.prototype={defaults:{},set:function(options){assign(this.options,options);this.manager&&this.manager.touchAction.update();return this;},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'recognizeWith',this)){return this;}
var simultaneous=this.simultaneous;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(!simultaneous[otherRecognizer.id]){simultaneous[otherRecognizer.id]=otherRecognizer;otherRecognizer.recognizeWith(this);}
return this;},dropRecognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'dropRecognizeWith',this)){return this;}
otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);delete this.simultaneous[otherRecognizer.id];return this;},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'requireFailure',this)){return this;}
var requireFail=this.requireFail;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(inArray(requireFail,otherRecognizer)===-1){requireFail.push(otherRecognizer);otherRecognizer.requireFailure(this);}
return this;},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'dropRequireFailure',this)){return this;}
otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);if(index>-1){this.requireFail.splice(index,1);}
return this;},hasRequireFailures:function(){return this.requireFail.length>0;},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id];},emit:function(input){var self=this;var state=this.state;function emit(event){self.manager.emit(event,input);}
if(state<STATE_ENDED){emit(self.options.event+stateStr(state));}
emit(self.options.event);if(input.additionalEvent){emit(input.additionalEvent);}
if(state>=STATE_ENDED){emit(self.options.event+stateStr(state));}},tryEmit:function(input){if(this.canEmit()){return this.emit(input);}
this.state=STATE_FAILED;},canEmit:function(){var i=0;while(i<this.requireFail.length){if(!(this.requireFail[i].state&(STATE_FAILED|STATE_POSSIBLE))){return false;}
i++;}
return true;},recognize:function(inputData){var inputDataClone=assign({},inputData);if(!boolOrFn(this.options.enable,[this,inputDataClone])){this.reset();this.state=STATE_FAILED;return;}
if(this.state&(STATE_RECOGNIZED|STATE_CANCELLED|STATE_FAILED)){this.state=STATE_POSSIBLE;}
this.state=this.process(inputDataClone);if(this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)){this.tryEmit(inputDataClone);}},process:function(inputData){},getTouchAction:function(){},reset:function(){}};function stateStr(state){if(state&STATE_CANCELLED){return'cancel';}else if(state&STATE_ENDED){return'end';}else if(state&STATE_CHANGED){return'move';}else if(state&STATE_BEGAN){return'start';}
return'';}
function directionStr(direction){if(direction==DIRECTION_DOWN){return'down';}else if(direction==DIRECTION_UP){return'up';}else if(direction==DIRECTION_LEFT){return'left';}else if(direction==DIRECTION_RIGHT){return'right';}
return'';}
function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;if(manager){return manager.get(otherRecognizer);}
return otherRecognizer;}
function AttrRecognizer(){Recognizer.apply(this,arguments);}
inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return optionPointers===0||input.pointers.length===optionPointers;},process:function(input){var state=this.state;var eventType=input.eventType;var isRecognized=state&(STATE_BEGAN|STATE_CHANGED);var isValid=this.attrTest(input);if(isRecognized&&(eventType&INPUT_CANCEL||!isValid)){return state|STATE_CANCELLED;}else if(isRecognized||isValid){if(eventType&INPUT_END){return state|STATE_ENDED;}else if(!(state&STATE_BEGAN)){return STATE_BEGAN;}
return state|STATE_CHANGED;}
return STATE_FAILED;}});function PanRecognizer(){AttrRecognizer.apply(this,arguments);this.pX=null;this.pY=null;}
inherit(PanRecognizer,AttrRecognizer,{defaults:{event:'pan',threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction;var actions=[];if(direction&DIRECTION_HORIZONTAL){actions.push(TOUCH_ACTION_PAN_Y);}
if(direction&DIRECTION_VERTICAL){actions.push(TOUCH_ACTION_PAN_X);}
return actions;},directionTest:function(input){var options=this.options;var hasMoved=true;var distance=input.distance;var direction=input.direction;var x=input.deltaX;var y=input.deltaY;if(!(direction&options.direction)){if(options.direction&DIRECTION_HORIZONTAL){direction=(x===0)?DIRECTION_NONE:(x<0)?DIRECTION_LEFT:DIRECTION_RIGHT;hasMoved=x!=this.pX;distance=Math.abs(input.deltaX);}else{direction=(y===0)?DIRECTION_NONE:(y<0)?DIRECTION_UP:DIRECTION_DOWN;hasMoved=y!=this.pY;distance=Math.abs(input.deltaY);}}
input.direction=direction;return hasMoved&&distance>options.threshold&&direction&options.direction;},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||(!(this.state&STATE_BEGAN)&&this.directionTest(input)));},emit:function(input){this.pX=input.deltaX;this.pY=input.deltaY;var direction=directionStr(input.direction);if(direction){input.additionalEvent=this.options.event+direction;}
this._super.emit.call(this,input);}});function PinchRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:'pinch',threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE];},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN);},emit:function(input){if(input.scale!==1){var inOut=input.scale<1?'in':'out';input.additionalEvent=this.options.event+inOut;}
this._super.emit.call(this,input);}});function PressRecognizer(){Recognizer.apply(this,arguments);this._timer=null;this._input=null;}
inherit(PressRecognizer,Recognizer,{defaults:{event:'press',pointers:1,time:251,threshold:9},getTouchAction:function(){return[TOUCH_ACTION_AUTO];},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTime=input.deltaTime>options.time;this._input=input;if(!validMovement||!validPointers||(input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime)){this.reset();}else if(input.eventType&INPUT_START){this.reset();this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit();},options.time,this);}else if(input.eventType&INPUT_END){return STATE_RECOGNIZED;}
return STATE_FAILED;},reset:function(){clearTimeout(this._timer);},emit:function(input){if(this.state!==STATE_RECOGNIZED){return;}
if(input&&(input.eventType&INPUT_END)){this.manager.emit(this.options.event+'up',input);}else{this._input.timeStamp=now();this.manager.emit(this.options.event,this._input);}}});function RotateRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:'rotate',threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE];},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN);}});function SwipeRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:'swipe',threshold:10,velocity:0.3,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this);},attrTest:function(input){var direction=this.options.direction;var velocity;if(direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)){velocity=input.overallVelocity;}else if(direction&DIRECTION_HORIZONTAL){velocity=input.overallVelocityX;}else if(direction&DIRECTION_VERTICAL){velocity=input.overallVelocityY;}
return this._super.attrTest.call(this,input)&&direction&input.offsetDirection&&input.distance>this.options.threshold&&input.maxPointers==this.options.pointers&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END;},emit:function(input){var direction=directionStr(input.offsetDirection);if(direction){this.manager.emit(this.options.event+direction,input);}
this.manager.emit(this.options.event,input);}});function TapRecognizer(){Recognizer.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0;}
inherit(TapRecognizer,Recognizer,{defaults:{event:'tap',pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[TOUCH_ACTION_MANIPULATION];},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTouchTime=input.deltaTime<options.time;this.reset();if((input.eventType&INPUT_START)&&(this.count===0)){return this.failTimeout();}
if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END){return this.failTimeout();}
var validInterval=this.pTime?(input.timeStamp-this.pTime<options.interval):true;var validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;this.pTime=input.timeStamp;this.pCenter=input.center;if(!validMultiTap||!validInterval){this.count=1;}else{this.count+=1;}
this._input=input;var tapCount=this.count%options.taps;if(tapCount===0){if(!this.hasRequireFailures()){return STATE_RECOGNIZED;}else{this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit();},options.interval,this);return STATE_BEGAN;}}}
return STATE_FAILED;},failTimeout:function(){this._timer=setTimeoutContext(function(){this.state=STATE_FAILED;},this.options.interval,this);return STATE_FAILED;},reset:function(){clearTimeout(this._timer);},emit:function(){if(this.state==STATE_RECOGNIZED){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input);}}});function Hammer(element,options){options=options||{};options.recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset);return new Manager(element,options);}
Hammer.VERSION='2.0.7';Hammer.defaults={domEvents:false,touchAction:TOUCH_ACTION_COMPUTE,enable:true,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:false}],[PinchRecognizer,{enable:false},['rotate']],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},['swipe']],[TapRecognizer],[TapRecognizer,{event:'doubletap',taps:2},['tap']],[PressRecognizer]],cssProps:{userSelect:'none',touchSelect:'none',touchCallout:'none',contentZooming:'none',userDrag:'none',tapHighlightColor:'rgba(0,0,0,0)'}};var STOP=1;var FORCED_STOP=2;function Manager(element,options){this.options=assign({},Hammer.defaults,options||{});this.options.inputTarget=this.options.inputTarget||element;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=element;this.input=createInputInstance(this);this.touchAction=new TouchAction(this,this.options.touchAction);toggleCssProps(this,true);each(this.options.recognizers,function(item){var recognizer=this.add(new(item[0])(item[1]));item[2]&&recognizer.recognizeWith(item[2]);item[3]&&recognizer.requireFailure(item[3]);},this);}
Manager.prototype={set:function(options){assign(this.options,options);if(options.touchAction){this.touchAction.update();}
if(options.inputTarget){this.input.destroy();this.input.target=options.inputTarget;this.input.init();}
return this;},stop:function(force){this.session.stopped=force?FORCED_STOP:STOP;},recognize:function(inputData){var session=this.session;if(session.stopped){return;}
this.touchAction.preventDefaults(inputData);var recognizer;var recognizers=this.recognizers;var curRecognizer=session.curRecognizer;if(!curRecognizer||(curRecognizer&&curRecognizer.state&STATE_RECOGNIZED)){curRecognizer=session.curRecognizer=null;}
var i=0;while(i<recognizers.length){recognizer=recognizers[i];if(session.stopped!==FORCED_STOP&&(!curRecognizer||recognizer==curRecognizer||recognizer.canRecognizeWith(curRecognizer))){recognizer.recognize(inputData);}else{recognizer.reset();}
if(!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)){curRecognizer=session.curRecognizer=recognizer;}
i++;}},get:function(recognizer){if(recognizer instanceof Recognizer){return recognizer;}
var recognizers=this.recognizers;for(var i=0;i<recognizers.length;i++){if(recognizers[i].options.event==recognizer){return recognizers[i];}}
return null;},add:function(recognizer){if(invokeArrayArg(recognizer,'add',this)){return this;}
var existing=this.get(recognizer.options.event);if(existing){this.remove(existing);}
this.recognizers.push(recognizer);recognizer.manager=this;this.touchAction.update();return recognizer;},remove:function(recognizer){if(invokeArrayArg(recognizer,'remove',this)){return this;}
recognizer=this.get(recognizer);if(recognizer){var recognizers=this.recognizers;var index=inArray(recognizers,recognizer);if(index!==-1){recognizers.splice(index,1);this.touchAction.update();}}
return this;},on:function(events,handler){if(events===undefined){return;}
if(handler===undefined){return;}
var handlers=this.handlers;each(splitStr(events),function(event){handlers[event]=handlers[event]||[];handlers[event].push(handler);});return this;},off:function(events,handler){if(events===undefined){return;}
var handlers=this.handlers;each(splitStr(events),function(event){if(!handler){delete handlers[event];}else{handlers[event]&&handlers[event].splice(inArray(handlers[event],handler),1);}});return this;},emit:function(event,data){if(this.options.domEvents){triggerDomEvent(event,data);}
var handlers=this.handlers[event]&&this.handlers[event].slice();if(!handlers||!handlers.length){return;}
data.type=event;data.preventDefault=function(){data.srcEvent.preventDefault();};var i=0;while(i<handlers.length){handlers[i](data);i++;}},destroy:function(){this.element&&toggleCssProps(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null;}};function toggleCssProps(manager,add){var element=manager.element;if(!element.style){return;}
var prop;each(manager.options.cssProps,function(value,name){prop=prefixed(element.style,name);if(add){manager.oldCssProps[prop]=element.style[prop];element.style[prop]=value;}else{element.style[prop]=manager.oldCssProps[prop]||'';}});if(!add){manager.oldCssProps={};}}
function triggerDomEvent(event,data){var gestureEvent=document.createEvent('Event');gestureEvent.initEvent(event,true,true);gestureEvent.gesture=data;data.target.dispatchEvent(gestureEvent);}
assign(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:STATE_FAILED,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,assign:assign,inherit:inherit,bindFn:bindFn,prefixed:prefixed});var freeGlobal=(typeof window!=='undefined'?window:(typeof self!=='undefined'?self:{}));freeGlobal.Hammer=Hammer;if(typeof define==='function'&&define.amd){define(function(){return Hammer;});}else if(typeof module!='undefined'&&module.exports){module.exports=Hammer;}else{window[exportName]=Hammer;}})(window,document,'Hammer');
;"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var Merge=function a(){_classCallCheck(this,a);var e={},o=!1,t=0;"boolean"==typeof arguments[0]&&(o=arguments[0],t++);for(var n=function(t){for(var n in t)t.hasOwnProperty(n)&&(o&&"[object Object]"===Object.prototype.toString.call(t[n])?e[n]=new a(o,e[n],t[n]):e[n]=t[n])};t<arguments.length;t++)n(arguments[t]);return e};
;"use strict";function _classCallCheck(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(o,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}function _createClass(o,t,s){return t&&_defineProperties(o.prototype,t),s&&_defineProperties(o,s),o}var Modal=function(){function t(o){return _classCallCheck(this,t),this.initialize(),this.options=new Merge(!0,{},this.defaultOptions,o),this.options.content="string"==typeof this.options.content?this.options.content:this.options.content.outerHTML,this.buildModalBackdrop(),this.buildModal(),this.events(),this.processShow(),this}return _createClass(t,[{key:"events",value:function(){this.options.enableCloseIcon&&this.modalHeaderClose.addEventListener("click",this.close.bind(this)),"function"==typeof this.options.onClose&&this.modal.addEventListener("close",this.options.onClose.bind(!1,this),!0),"function"==typeof this.options.onShow&&this.modal.addEventListener("load",this.options.onShow.bind(!1,this),!0),"function"==typeof this.options.onChange&&this.modal.addEventListener("change",this.options.onChange.bind(!1,this),!0),"function"==typeof this.options.onClick&&this.modal.addEventListener("click",this.options.onClick.bind(!1,this),!0)}},{key:"initialize",value:function(){this.defaultOptions={type:null,title:null,content:null,bodyClass:null,modalId:null,buttons:{ok:{label:"Ok",class:"btn btn-primary text-uppercase",onClick:null},cancel:{label:"Cancel",class:"btn btn-default text-uppercase",onClick:null}},enableCloseIcon:!0,enableFooter:!0,enableHeader:!0,size:null,onClose:null,onShow:null,onChange:null,onClick:null,showButtons:!1,showDialogOnPosition:0},this.variables={tabIndex:"-1",modalRole:"dialog",modalIconFontClass:"pa-modal-icon",modalXIconClass:"pa-modal-icon-close",modalClass:"pa-modal",modalDialogClass:"pa-modal-dialog",modalContentClass:"pa-modal-content",modalTitleClass:"pa-modal-title",modalFadeClass:"pa-fade",modalInClass:"pa-in",modalBackdropClass:"pa-modal-backdrop",modalBodyElementClass:"pa-modal-open",modalHeaderClass:"pa-modal-header",modalBodyClass:"pa-modal-body",modalFooterClass:"pa-modal-footer",modalSizes:["small","medium","large"]}}},{key:"buildModal",value:function(){return this.modal=document.createElement("div"),this.modal.classList.add(this.variables.modalClass,this.variables.modalFadeClass),this.options.modalId&&(this.modal.id=this.options.modalId),this.modal.setAttribute("tabindex",this.variables.tabIndex),this.modal.setAttribute("role",this.variables.modalRole),this.options.type&&(this.modal.id="".concat(this.variables.modalClass,"-").concat(this.options.type)),this.modal.appendChild(this.buildModalDialog()),document.body.appendChild(this.modal),this.modal}},{key:"buildModalBackdrop",value:function(){return this.modalBackdrop=document.createElement("div"),this.modalBackdrop.classList.add(this.variables.modalBackdropClass,this.variables.modalFadeClass),document.body.appendChild(this.modalBackdrop),this.modalBackdrop}},{key:"buildModalContent",value:function(){return this.modalContent=document.createElement("div"),this.modalContent.classList.add(this.variables.modalContentClass),this.options.enableHeader&&this.modalContent.append(this.buildModalHeader()),this.modalContent.append(this.buildModalBody()),this.options.enableFooter&&this.modalContent.append(this.buildModalFooter()),this.modalContent}},{key:"buildModalDialog",value:function(){return this.modalDialog=document.createElement("div"),this.modalDialog.classList.add(this.variables.modalDialogClass),this.options.size&&this.variables.modalSizes.includes(this.options.size)&&this.modalDialog.classList.add("pa-modal-".concat(this.options.size)),this.modalDialog.appendChild(this.buildModalContent()),this.modalDialog}},{key:"buildModalHeader",value:function(){return this.modalHeader=document.createElement("div"),this.modalHeader.classList.add(this.variables.modalHeaderClass),this.options.enableCloseIcon&&(this.modalHeaderClose=document.createElement("i"),this.modalHeaderClose.classList.add(this.variables.modalIconFontClass,this.variables.modalXIconClass),this.modalHeaderClose.dataset.dismiss=this.variables.modalClass,this.modalHeader.appendChild(this.modalHeaderClose)),this.modalHeader.append(this.options.title),this.modalHeader}},{key:"buildModalBody",value:function(){return this.modalBody=document.createElement("div"),this.modalBody.classList.add(this.variables.modalBodyClass),this.options.bodyClass&&this.modalBody.classList.add(this.options.bodyClass),this.modalBody.innerHTML=this.options.content,this.modalBody}},{key:"buildModalFooter",value:function(){return this.modalFooter=document.createElement("div"),this.modalFooter.classList.add(this.variables.modalFooterClass),this.options.showButtons&&this.modalFooter.append(this.buildModalFooterButtons()),this.modalFooter}},{key:"buildModalFooterButtons",value:function(){var a=this;return this.options.showButtons&&(this.modalFooterButtons=document.createElement("div"),Object.keys(this.options.buttons).forEach(function(o){var t=a.options.buttons[o];if(!1!==t){var s=document.createElement("a");t.onClick&&s.addEventListener("click",t.onClick.bind(!1,a),!0),s.setAttribute("href","javascript:;"),t.class?s.setAttribute("class",t.class):s.classList.add("btn","btn-default","text-uppercase"),s.innerText=t.label,a.modalFooterButtons.appendChild(s)}})),this.modalFooterButtons}},{key:"show",value:function(){this.modal.classList.add(this.variables.modalInClass),this.modalBackdrop.classList.add(this.variables.modalInClass),document.body.classList.add(this.variables.modalBodyElementClass),this.dialogShown=!0}},{key:"processShow",value:function(){var o=this,t=this.options.showDialogOnPosition;0===t?this.show():window.onscroll=function(){window.scrollY>=t&&!o.dialogShown&&o.show()}}},{key:"close",value:function(){var o=this;this.modal.classList.remove(this.variables.modalInClass),this.modalBackdrop.classList.remove(this.variables.modalInClass),this.modal.dispatchEvent(new Event("close")),1===document.getElementsByClassName(this.variables.modalBackdropClass).length&&document.body.classList.remove(this.variables.modalBodyElementClass),setTimeout(function(){document.body.removeChild(o.modal),document.body.removeChild(o.modalBackdrop)},500)}}]),t}();
;"use strict";var _this3=void 0;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var getMediaIdFromUrl=function(){return-1<window.location.href.indexOf("#media-")?window.location.hash.replace("#media-",""):null},showArrows=!0,Gallery=function(){function n(e,t,i){_classCallCheck(this,n);var a=window.location.pathname.split("/")[1];this.galleryData=null,this.initialIndexes=null,this.data=e,this.config=i;var r=document.querySelector(t).innerHTML;this.$container=(new DOMParser).parseFromString(r,"text/html").body.firstChild,this.pageType="news"===a?"articles":a}return _createClass(n,[{key:"findGallery",value:function(i){function e(t){a.data.galleries[t].data.forEach(function(e){e.image_id!==parseInt(i)&&e.youtube_id!==i&&e.video_id!==i||(r={galleryId:t,mediaId:i})})}var a=this,r={};for(var t in this.data.galleries)e(t);return r}},{key:"buildGallery",value:function(e){this.galleryData=this.data.galleries[e.galleryId],this.setInitialImages(e.mediaId),this.buildHTML(),this.openFullScreen()}},{key:"buildFromEvent",value:function(e){var t=e.target,i=t.closest('[id*="gallery"]');return{galleryId:i.id,mediaId:t.closest(".show-grid-images")||t.classList.contains("show-grid-images")?i.querySelector(".slide:first-child img").dataset.id:t.dataset.id}}},{key:"openFullScreen",value:function(){this.$container.classList.add("full-screen","active"),document.body.appendChild(this.$container),this.$container.style.removeProperty("display"),document.body.classList.add("gallery-full-screen")}},{key:"setInitialImages",value:function(t){var e=this.galleryData.data.findIndex(function(e){return e.video_id==t||e.youtube_id==t||e.image_id==t});1===this.galleryData.data.length?this.initialIndexes={prev:0,next:0,current:0}:0===e?this.initialIndexes={prev:this.galleryData.data.length-1,next:1,current:0}:e===this.galleryData.data.length-1?this.initialIndexes={prev:e-1,next:0,current:e}:this.initialIndexes={prev:e-1,next:e+1,current:e}}},{key:"buildHTML",value:function(){this.buildPreview(),this.buildSideBarInfo(),this.buildSideBar(),showArrows=1!==this.galleryData.data.length||(this.$container.querySelectorAll(".image-nav").forEach(function(e){e.style.display="none"}),!1)}},{key:"buildPreview",value:function(){var e=this.$container.querySelector(".preview-slider-images").children;this.setPreviewAttributes(e[0],this.initialIndexes.prev),this.setPreviewAttributes(e[1],this.initialIndexes.current),this.setPreviewAttributes(e[2],this.initialIndexes.next)}},{key:"buildSideBarInfo",value:function(){var e=this.$container.querySelector(".slide-show-gallery-sidebar-info"),t=this.getImageData(this.galleryData.data[this.initialIndexes.current].image_id);e.querySelector("h3").innerText=void 0!==t.title?"".concat(++this.initialIndexes.current,". ").concat(t.title):"",e.querySelector("p").innerText=void 0!==t.caption?t.caption:""}},{key:"buildSideBar",value:function(){var a=this,r=this.$container.querySelector(".slide-show-gallery-slides"),n=r.querySelector(".slide");this.galleryData.data.forEach(function(e,t){var i=a.buildSlide(e,n,t);r.appendChild(i)}),r.querySelector(".slide:first-child").remove()}},{key:"buildSlide",value:function(e,t,i){var a;return a="embed"===e.type?this.buildEmbedSlide(e,t):this.buildImageSlide(e,t),void 0!==e.title&&e.title?a.dataset.title="".concat(++i,". ").concat(e.title):void 0===e.title&&void 0!==e.name&&"embed"===e.type&&(a.dataset.title="".concat(++i,". ").concat(e.name)),e.title!==e.comment&&(a.dataset.description="".concat(e.comment||"")),a}},{key:"buildEmbedSlide",value:function(e,t){var i=t.cloneNode(!0),a=i.querySelector("img");return i.dataset.id="".concat(e.youtube_id||e.image_id),i.dataset.embed=e.embed,i.dataset.width=e.width,i.dataset.height=e.height,a.src=e.thumb,i.classList.add("embed"),i}},{key:"buildImageSlide",value:function(e,t){var i=t.cloneNode(!0),a=i.querySelector("img");return i.dataset.id="".concat(e.image_id||e.id),i.dataset.type=e.type||"",i.dataset.videosrc=this.buildVideoURL(e),i.dataset.comment=e.comment||"",i.dataset.title=e.title||"",i.dataset.link=e.link||"",i.dataset.width=e.width||"",i.dataset.height=e.height||"",a.src=this.buildImagePoster(e),a.alt=e.name||"",a.dataset.poster=this.buildImagePoster(e),a.dataset.image=this.buildImageURL(e),i}},{key:"getImageData",value:function(t){return this.galleryData.data.find(function(e){return e.image_id==t||e.id==t})}},{key:"setPreviewAttributes",value:function(e,t){var i=this.getImageData(this.galleryData.data[t].image_id);switch(i.type){case"video":this.setPreviewVideoAttributes(e,i);break;case"embed":this.setPreviewEmbedAttributes(e,i);break;default:this.setPreviewImageAttributes(e,i)}}},{key:"setPreviewVideoAttributes",value:function(e,t){var i=document.createElement("video"),a=document.createElement("source");e.dataset.id="".concat(t.video_id||t.id),e.dataset.width=t.width||"",e.dataset.height=t.height||"",e.dataset.name=t.name||"",a.src=this.buildVideoURL(t),a.type="video/".concat(a.src.split(".").pop()),i.appendChild(a),i.poster=this.buildVideoPoster(t),i.controls=!0,i.muted=!0,i.playsinline=!0,i.autoplay=!0,e.appendChild(i),e.querySelector("img").remove()}},{key:"setPreviewImageAttributes",value:function(e,t){e.dataset.id="".concat(t.image_id||t.id),e.dataset.width=t.width||"",e.dataset.height=t.height||"",e.classList.add(t.width>t.height?"landscape":"portrait"),e.querySelector("img").src=this.buildImageURL(t)}},{key:"setPreviewEmbedAttributes",value:function(e,t){e.dataset.id=t.youtube_id||t.id,e.dataset.width=t.width||"",e.dataset.height=t.height||"",e.dataset.image=t.thumb||"",e.dataset.embed=t.embed||"",e.querySelector("img").remove();var i=t.embed?(new DOMParser).parseFromString(t.embed,"text/html"):null;if(i){var a=i.body.firstChild;e.appendChild(a)}}},{key:"replaceSpecialChars",value:function(e){return e.replace(/[^.0-9A-Za-z-\s]/g,"")}},{key:"buildImageURL",value:function(e){var t="".concat(Browser.getSupportedImageType());e.name=e.name.replace(/\.[^.$]+$/,"");var i=this.requireWatermarkString(e);if("ads"===e.module)return"".concat(this.config.cdn_url,"/images/publicize/").concat(e.image_big);if("phones"!==e.module)return"".concat(this.config.cdn_url,"/images/").concat(e.module,"/").concat(e.image_id,"-image/").concat(this.replaceSpecialChars(e.name.replace(/_/g,"-")),".").concat(t).concat(i);var a=1e3<=e.width?"xlarge":"large";return"".concat(this.config.cdn_url,"/images/").concat(e.module,"/").concat(e.image_id,"-").concat(a,"/").concat(this.replaceSpecialChars(e.name.replace(/_/g,"-")),".").concat(t).concat(i)}},{key:"buildImagePoster",value:function(e){var t="".concat(Browser.getSupportedImageType());e.name=e.name.replace(/\.[^.$]+$/,"");var i=this.requireWatermarkString(e);return"ads"===e.module?"".concat(this.config.cdn_url,"/images/publicize/").concat(e.image_big):"phones"===e.module?"".concat(this.config.cdn_url,"/images/").concat(e.module,"/").concat(e.image_id,"-default/").concat(this.replaceSpecialChars(e.name.replace(/_/g,"-")),".").concat(t).concat(i):"".concat(this.config.cdn_url,"/images/").concat(e.module,"/").concat(e.image_id,"-gallery/").concat(this.replaceSpecialChars(e.name.replace(/_/g,"-")),".").concat(t).concat(i)}},{key:"buildVideoURL",value:function(e){return e.video_id?"".concat(this.config.cdn_url,"/videos/").concat(e.module,"/").concat(e.video_id,"-video/").concat(this.replaceSpecialChars(e.name.replace(".jpg",".mp4").replace(/_/g,"-"))):""}},{key:"buildVideoPoster",value:function(e){return"".concat(this.config.cdn_url,"/images/").concat(e.module,"/").concat(e.image_id,"-thumb/").concat(this.replaceSpecialChars(e.name.replace(/_/g,"-")))}},{key:"requireWatermarkString",value:function(e){var t="";return e.hasWatermark&&(t="?"+this.config.cdn_watermark_flag),t}}]),n}(),tgSlideshowGallery=function(n){var s,o;o=n.configDataContainer?JSON.parse(document.querySelector(n.configDataContainer).textContent):JSON.parse(document.querySelector("#galleries-config-data").textContent),n.originalUrl=window.location.href,n.configData=o,s=n.dataContainer?JSON.parse(document.querySelector(n.dataContainer).textContent):JSON.parse(document.querySelector("#galleries-data").textContent),document.querySelectorAll('a[id*="gallery-"], [id*="gallery-"]:not(.thumbnail-gallery-container, .inline-gallery-container) a:not([class*="widgetMedia__controls_"])').forEach(function(r){r.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault();var t=r.classList.contains("show-grid-images")||r.classList.contains("gallery"),i=new Gallery(s,"#fullscreen-gallery-template",o),a=i.buildFromEvent(e);i.buildGallery(a),tgSlideshowGalleryInstance(n,t)})});var e=getMediaIdFromUrl();if(e){var t=new Gallery(s,"#fullscreen-gallery-template",o),i=t.findGallery(e);t.buildGallery(i),tgSlideshowGalleryInstance(n,!1)}},tgSlideshowGalleryInstance=function(e,t){var s,d=1280,i={dataContainer:"#galleries-data",configDataContainer:"#galleries-config-data",$container:document.querySelector(".slide-show-gallery.full-screen.active"),slideSpeed:200,swipeDistanceBeforeAnimation:10,$leftNavigation:document.querySelector(".image-nav-left"),$rightNavigation:document.querySelector(".image-nav-right"),controls:{$container:document.querySelector(".slide-show-gallery-controls"),$listView:document.querySelector(".gallery-list-view"),$close:document.querySelector(".slide-show-gallery-close")},$previewSlider:document.querySelector(".preview-slider"),$zoomIcon:document.querySelector(".zoom-icon"),previewImages:{$container:document.querySelector(".preview-slider-images"),$images:function(){return this.$container.querySelectorAll("div")},$previousImage:function(){return this.$images()[0]},$currentImage:function(){return this.$images()[1]},$nextImage:function(){return this.$images()[2]}},$slides:document.querySelector(".slide-show-gallery-slides"),$slideElement:".slide",sidebar:{$sliderContainer:document.querySelector(".slide-show-gallery-sidebar-slider"),$slider:document.querySelector(".slide-show-gallery-sidebar-slider"),width:function(){return this.$sliderContainer.offsetWidth},height:function(){return this.$sliderContainer.offsetHeight},slideWidth:function(){return p.$slides.querySelector(p.$slideElement).offsetWidth},slideHeight:function(){return p.$slides.querySelector(p.$slideElement).offsetHeight},info:{$container:document.querySelector(".slide-show-gallery-sidebar-info"),$title:document.querySelector(".slide-show-gallery-sidebar-info h3"),$description:document.querySelector(".slide-show-gallery-sidebar-info p")}},sidebarBanner1:document.querySelector(".sidebar-banner"),refreshBanners:[]},p={},a=!1,y=!1,o=!1,w=1,b=0,S=0,$=0,I=0,r=!1,l=8,c=new Date,n=function(){-1<window.location.href.indexOf("#media")?window.history.replaceState({},"",p.originalUrl):window.history.pushState({},"",p.originalUrl)},u=function(){p.$leftNavigation.addEventListener("click",function(){q.call(_this3,!1,"100%")}),p.$rightNavigation.addEventListener("click",function(){q.call(_this3,!0,"-100%")}),p.$slides.querySelectorAll(p.$slideElement).forEach(function(e){e.addEventListener("click",function(e){a&&(_(),a=!a),function(e){y&&C(e);var i=e.currentTarget,t=p.previewImages.$currentImage().dataset.id,a=p.$slides.querySelector('[data-id="'.concat(t,'"]')),r=i.dataset.id,n=0,s=0;p.$slides.querySelectorAll(p.$slideElement).forEach(function(e,t){e===i&&(n=t),e===a&&(s=t)});var o=k(i);if(p.previewImages.$currentImage().dataset.id===r)return!1;s<n?(p.previewImages.$nextImage().remove(),p.previewImages.$container.appendChild(o),q.call(this,!0,"-100%")):(p.previewImages.$previousImage().remove(),p.previewImages.$container.prepend(o),q.call(this,!1,"100%"))}.call(_this3,e)})}),p.controls.$listView.addEventListener("click",function(e){a=!a,_(),a&&function(e){var t="Open View All";t=e.originalEvent?"".concat(t," Internal"):"".concat(t," External");!function(){if(!p.configData.opts.register);}()}(e)}),p.controls.$close.addEventListener("click",function(){E()}),document.addEventListener("keydown",m),p.$zoomIcon.addEventListener("click",function(e){C(e)}),window.addEventListener("resize",g),window.addEventListener("load",function(){if(window.history.length<=2&&window.location.href.includes("#media-")){var e=window.location.href;window.history.pushState({isBackPage:!0},document.title,window.location.pathname+window.location.search),window.history.pushState({isBackPage:!1},document.title,e)}}),window.addEventListener("hashchange",function(e){window.location.hash||E();var t=e.newURL,i=e.oldURL,a=getMediaIdFromUrl();a&&t!==i&&0===document.querySelectorAll(".gallery-list-view").length&&p.$slides.querySelector('[data-id="'.concat(a,'"]')).click();return!1})};function g(e){x()?p.$previewSlider.classList.remove("isZoomable"):p.$previewSlider.classList.add("isZoomable"),y&&C(e)}function m(e){39===e.keyCode&&showArrows?q.call(this,!0,"-100%"):37===e.keyCode&&showArrows?q.call(this,!1,"100%"):32===e.keyCode?C(e):27===e.keyCode&&E()}function h(e){googletag.cmd.push(function(){googletag.pubads().refresh([e])})}function f(){p.configData.opts.register&&PA_track_view(p.configData.opts.register.module+".slideview",p.configData.opts.register.id,p.configData.opts.register.country)}function q(e,t){if(y&&C(event),r)return!1;var i;r=!0,p.previewImages.$currentImage().style.transition="all 0.5s",p.previewImages.$currentImage().style.transform="translateX("+t+")",L(i=e?p.previewImages.$nextImage():p.previewImages.$previousImage()),setTimeout(function(){!function(e,t){var i=e.dataset.id,a=function(e){var t=p.$slides.querySelectorAll(p.$slideElement),i=e.nextElementSibling?e.nextElementSibling:t[0],a=e.previousElementSibling?e.previousElementSibling:t[t.length-1];return{next:k(i),prev:k(a)}}(p.$slides.querySelector('[data-id="'.concat(i,'"]')));t?(p.previewImages.$currentImage().remove(),p.previewImages.$previousImage().remove()):(p.previewImages.$nextImage().remove(),p.previewImages.$currentImage().remove());p.previewImages.$container.appendChild(a.next),p.previewImages.$container.prepend(a.prev),p.previewImages.$currentImage().classList.contains("landscape")?p.$container.classList.add("landscape"):p.$container.classList.remove("landscape")}(i,e),v(i),f(),r=!1},50)}function v(e){var t,i=e.dataset.id,a=p.$slides.querySelector('[data-id="'.concat(i,'"]'));x()?p.$previewSlider.classList.remove("isZoomable"):p.$previewSlider.classList.add("isZoomable"),void 0!==(t=i)&&window.history.replaceState({},"","#media-".concat(t)),function(e){var t=e.dataset.title||e.dataset.name||"",i=e.dataset.description||"";if(p.sidebar.info.$title.innerText=t,p.sidebar.info.$description.innerText=i,p.$container.offsetWidth>=d){var a=p.sidebarBanner1.offsetHeight+p.sidebar.info.$container.offsetHeight;p.sidebar.$sliderContainer.style.maxHeight="calc(100% - "+a+"px)"}}(a),function(){var t=this;if(p.previewImages.$currentImage().querySelector("img")){var f=function(e,t,i){if(y=1<e){var a=["scale("+e+")","translate3d("+t+"px, "+i+"px, 0px)"];a=a.join(" "),n(a),p.previewImages.$container.classList.contains("zooming")||p.previewImages.$container.classList.add("zooming")}else r()},r=function(){p.previewImages.$container.classList.remove("zooming"),e(),$=b=0,o=y=!(w=1)},n=function(e){var t=v();t.style.webkitTransform=e,t.style.mozTransform=e,t.style.msTransform=e,t.style.oTransform=e,t.style.transform=e},e=function(){var e=v();e.style.removeProperty("webkitTransform"),e.style.removeProperty("mozTransform"),e.style.removeProperty("msTransform"),e.style.removeProperty("oTransform"),e.style.removeProperty("transform")},v=function(){return p.previewImages.$currentImage().querySelector("img")};s.off("pan"),s.off("panend"),s.off("pinch"),s.off("pinchend"),s.off("swipe"),r(),s.get("swipe").recognizeWith("pan"),x()||(s.get("pinch").set({enable:!0}).recognizeWith("pan"),s.on("pan panup pandown",function(e){if(y){var t=window.getComputedStyle(v()),i=new WebKitCSSMatrix(t.transform||t.webkitTransform||t.mozTransform);w=i.m11,S=b+e.deltaX/w,I=$+e.deltaY/w;var a=(s=w,o=S,l=I,c=(n=e).target,d=n.target.querySelector("img"),u=(c.offsetWidth!==d.offsetWidth&&c.classList.contains("landscape")?c.offsetWidth-d.offsetWidth:c.offsetWidth-d.offsetWidth*s)/s/2,g=-(u=u<0?-1*u:u),m=(c.offsetHeight!==d.offsetHeight&&c.classList.contains("portrait")?c.offsetHeight-d.offsetHeight:c.offsetHeight-d.offsetHeight*s)/s/2,h=-(m=m<0?-1*m:m),u<o&&(o=u),o<g&&(o=g),m<l&&(l=m),l<h&&(l=h),{left:o,top:l});f(w,S=a.left,I=a.top)}else{var r=p.$container.scrollTop;p.$container.scroll({top:r-e.deltaY,left:0,behavior:"smooth"})}var n,s,o,l,c,d,u,g,m,h}),s.on("panend",function(){b=S,$=I}),s.on("pinch",function(e){f(w*e.scale,b,$)}),s.on("pinchend",function(e){w=(w*=e.scale)<1?1:w;var t=e.target.offsetParent.dataset.height?e.target.offsetParent.dataset.height:e.target.dataset.height,i=e.target.offsetParent.dataset.width?e.target.offsetParent.dataset.width:e.target.dataset.width;w=e.target.classList.contains("portrait")?w>=t/e.target.offsetHeight?t/e.target.offsetHeight:w:w>=i/e.target.offsetWidth?i/e.target.offsetWidth:w,f(w,b,$),y=1<w})),s.on("swipe",function(e){if(!y){switch(e.direction){case 2:q.call(t,!0,"-100%");break;case 4:q.call(t,!1,"100%")}window.setTimeout(r,p.slideSpeed)}})}}();var r,n=(r=new Date-c,r/=1e3,Math.round(r));(l<=n||0===n)&&(function(){if("undefined"!=typeof ssgAdSlot){!function(){var e=p.sidebarBanner1.querySelector("div.adSpot"),t=ssgAdSlot.getSlotElementId();if(e.getAttribute("id"))h(ssgAdSlot);else{e.setAttribute("id",t);var i=document.createElement("script");if(i.innerHTML="googletag.cmd.push(function() { googletag.display('".concat(t,"'); });"),e.append(i),googletag.pubads().isInitialLoadDisabled()&&h(ssgAdSlot),window.googletag&&googletag.pubadsReady){var a=!1;googletag.pubads().addEventListener("slotRenderEnded",function(e){a=e.slot===ssgAdSlot}),setTimeout(function(){a||h(ssgAdSlot)},500)}}}()}else console.error("Undefined ssgAdSlot global variable")}(),c=new Date)}function L(e){var t,i,a,r,n,s,o=e.dataset.id,l=window.innerWidth<=d,c=p.$slides.querySelector('[data-id="'.concat(o,'"]'));p.$slides.querySelectorAll(".slide.active").forEach(function(e){e.classList.remove("active")}),c.classList.add("active"),l?(r=c.offsetLeft,n=p.sidebar.width()/2,s=r-(n-p.sidebar.slideWidth()/2),p.sidebar.$slider.scrollTo(s,0)):(t=c.offsetTop,i=p.sidebar.height()/2,a=t-i,p.sidebar.$slider.scrollTop=a)}function k(e){var t,i;return e.classList.contains("embed")?(t=e,(i=document.createElement("div")).dataset.id=t.dataset.id,i.innerHTML=t.dataset.embed,i.querySelector("iframe").style.maxWidth="100%",i.querySelector("iframe").style.maxHeight="100%",i):function(e){var t=document.createElement("div"),i=function(e){var t=document.createElement("img");t.src=e.querySelector("img").src,e.dataset.height>=e.dataset.width?t.style.height="".concat(e.dataset.height,"px"):t.style.width="".concat(e.dataset.width,"px");return t}(e),a=function(e,t){var i=new Image;return i.addEventListener("load",function(e){e.currentTarget.previousElementSibling.remove(),e.currentTarget.className="",p.previewImages.$container.classList.remove("disable"),p.sidebar.$sliderContainer.classList.remove("disable")}.bind(t)),i.src=e.querySelector("img").dataset.image,i.className="loading",p.previewImages.$container.classList.add("disable"),p.sidebar.$sliderContainer.classList.add("disable"),i}(e,t);t.dataset.id=e.dataset.id,t.dataset.width=e.dataset.width,t.dataset.height=e.dataset.height,t.appendChild(i),t.appendChild(a),t.src=e.querySelector("img").dataset.image,e.dataset.height>e.dataset.width?t.className="portrait":t.className="landscape";return t}(e)}function _(){p.$slides.querySelectorAll(".active").forEach(function(e){e.classList.remove("active")}),p.sidebar.$sliderContainer.querySelector("div").classList.toggle("list-view"),p.controls.$container.classList.toggle("span-full-width")}function E(){window.removeEventListener("resize",g),document.removeEventListener("keydown",m),p.$container.remove(),window.history.replaceState({},document.title,window.location.pathname+window.location.search),document.body.classList.remove("gallery-full-screen")}function x(){return!p.previewImages.$currentImage().querySelector("img")||p.previewImages.$currentImage().dataset.width<=p.previewImages.$container.offsetWidth&&p.previewImages.$currentImage().dataset.height<=p.previewImages.$container.offsetHeight}function C(){if(x())return!1;var e=p.previewImages.$container,t=p.previewImages.$currentImage(),i=t.querySelector("img");if(e.classList.toggle("zooming"),e.classList.contains("zooming")){var a=["translate3d(0px, 0px, 0px)","scale("+(w=t.classList.contains("portrait")?t.dataset.height/i.offsetHeight:t.dataset.width/i.offsetWidth)+")"].join(" ");i.style.webkitTransform=a,i.style.mozTransform=a,i.style.msTransform=a,i.style.oTransform=a,i.style.transform=a}else w=1,i.style.removeProperty("webkitTransform"),i.style.removeProperty("mozTransform"),i.style.removeProperty("msTransform"),i.style.removeProperty("oTransform"),i.style.removeProperty("transform");b=$=0,y=!y,o=!o}p=Object.assign(i,e),s=new Hammer(document.querySelector(".preview-slider-images")),n(),L(p.previewImages.$currentImage()),v(p.previewImages.$currentImage()),u(),t?p.controls.$listView.click():f("Open"),x()||p.$previewSlider.classList.add("isZoomable")};window.addEventListener("load",function(){tgSlideshowGallery({})});
;"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var Specs=function(){function e(){_classCallCheck(this,e),this.modal=null,this.init()}return _createClass(e,[{key:"init",value:function(){var e=this;this.setCurrentHash(),this.hash&&this.hashEventHandler(),window.addEventListener("hashchange",function(){e.hashEventHandler()})}},{key:"hashEventHandler",value:function(){this.setCurrentHash(),this.setContent()}},{key:"setContent",value:function(){var e=this,t=document.createElement("div");if(t.innerHTML='<div class="loader"></div>',this.modalTitle="",this.modalSize="medium",this.modalButtonLabel=null,this.modalAppendClass=null,this.urlObject=null,this.moduleExists())switch(this.hash){case"related-video":this.modalSize="large",this.modalTitle=this.getTitle(),t.innerHTML=this.getRelatedVideoIframeElement(),this.modalAppendClass=["pa-modal-video"],this.showModal(t);break;case"manual":this.modalTitle=this.getTitle(),this.modalSize="large",t.innerHTML='<div class="loader"></div>',this.urlObject=new URL(window.location.href);var a=this.urlObject.origin+this.urlObject.pathname+this.urlObject.search+"/manual",i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&200===i.status&&(t.innerHTML=i.response.html,e.showModal(t))},i.open("GET",a,!0),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Accept","text/html;".concat(Browser.getImageAcceptHeader())),i.responseType="json",i.send();break;case"photos":var n=document.querySelector(".phoneSpecs__full_gallery");setTimeout(function(){e.replaceState(window.location.pathname+window.location.search),n.click()},500)}}},{key:"showModal",value:function(e){var t=this;this.modal=new Modal({title:this.getModalTitle(),modalId:"pa-modal-specs",content:e,size:this.modalSize,bodyClass:this.modalAppendClass,buttons:{ok:{label:this.modalButtonLabel},cancel:!1},onClose:function(){t.replaceState(window.location.pathname+window.location.search)}})}},{key:"closeModal",value:function(){this.modal&&(this.modal.close(),this.modal=null)}},{key:"replaceState",value:function(e){return e=void 0!==e?e:window.location.href,window.history.replaceState({},document.title,e),this}},{key:"pushState",value:function(e){return e=void 0!==e?e:window.location.href,window.history.pushState({},document.title,e),this}},{key:"moduleExists",value:function(){if(-1<["Battery","Display","Hardware_&_Performance","Camera","Multimedia"].indexOf(this.hash))return!1;if(this.hash.includes("photos"))this.pushState(window.location.pathname+window.location.search);else{if(!this.getTitle()&&this.hash.includes("media-"))return this.replaceState(),!1;if(this.getTitle()&&"related-video"===this.hash)this.replaceState();else{if(!this.hash&&this.modal)return this.closeModal(),!1;if(-1===["manual","related-video","photos"].indexOf(this.hash))return this.closeModal(),this.replaceState(window.location.pathname+window.location.search),!1}}return!0}},{key:"getModalTitle",value:function(){var e=document.createElement("h4");return e.classList.add("pa-modal-title"),e.innerHTML=this.modalTitle,e}},{key:"setCurrentHash",value:function(){this.hash=window.location.hash.substr(1)}},{key:"getRelatedVideoId",value:function(){var e=document.querySelector("[id*='".concat(this.hash,"']"));return e&&void 0!==e.dataset.id?e.dataset.id:""}},{key:"getRelatedVideoIframeElement",value:function(){var e=document.createElement("iframe");return e.classList.add("youtube-video"),e.src="//www.youtube.com/embed/".concat(this.getRelatedVideoId(),"?autoplay=1"),e.allowFullscreen=!0,e.frameborder="0",e.outerHTML}},{key:"getTitle",value:function(){var e=document.querySelector("[id*='".concat(this.hash,"']"));return e&&void 0!==e.dataset.title?e.dataset.title:null}}]),e}();window.addEventListener("load",function(){new Specs});
;"use strict";!function(s){s.scrollToElement=function(t,e){return e=e||750,s("html, body").animate({scrollTop:t.offset().top,scrollLeft:t.offset().left},e),t},s.fn.scrollTo=function(t){return t=t||"normal",s.scrollToElement(this,t)}}(jQuery),jQuery.fn.DefaultValue=function(e){return this.each(function(){if("text"==this.type||"password"==this.type||"textarea"==this.type){var t=this;$(this).attr("default",e),""==this.value&&(this.value=e,$(this).addClass("defaulttext")),$(this).focus(function(){this.value!=e&&""!=this.value||(this.value="",$(this).removeClass("defaulttext"))}),$(this).blur(function(){this.value!=e&&""!=this.value||(this.value=e,$(this).addClass("defaulttext"))}),$(this).parents("form").each(function(){$(this).submit(function(){t.value==e&&(t.value="",$(t).removeClass("defaulttext"))})})}})},function(u){u.inviteFriends=function(t){var n="To: (separate emails with commas)",h="Message: (optional)";u("#invite_to",t).DefaultValue(n),u("#invite_msg",t).DefaultValue(h),u("#invite_cancel",t).click(function(){u("#invite_to").val(n),u("#invite_msg").val(h),u("#invite_submit").show()});var l=t.find(".loader");t.validate({submitHandler:function(t){u(t).ajaxSubmit({dataType:"json",success:function(t){u("#invite_submit").parent().show(),l.hide(),t.code?(t.message&&showMessage(t.message),u("#invite_to").val(n),u("#invite_msg").val(h)):showError(t.message)},beforeSubmit:function(){var t=u("#invite_to").val();t&&t!=n||alert("Please, enter your friends email.");for(var e=/^(.+)@([^@]+)$/,s=t.split(","),i=0;i<s.length;i++){var a=s[i];if(a.replace(/^\s+|\s+$/g,""),-1==a.search(e))return alert("Invalid e-mail address : "+a+"!\r"),!1}u("#invite_msg").val()==h&&u("#invite_msg").val(""),u("#invite_submit").parent().hide(),l.show()}})}})},u.fn.inviteFriends=function(){return u.inviteFriends(this)}}(jQuery),function(l){l.fn.gbSearch=function(t){return this.each(function(){e(this,t)})};var e=function t(e,s){return e.gbSearchObject?e.gbSearchObject:new t.fn.init(e,s)},a={searchDelay:300,minChars:1,maxSearches:1,defaultText:"Search here",loadingClassContainer:"div",loadingClass:"loading",resultsContainer:".resultscontainer",success:null,params:null,bindClick:!0,saveToHistory:!1,closeOnBlur:!0};e.fn=e.prototype={gbSearch:"0.1.0",activeSearches:0,searchTimer:!1,url:null,lastValue:!1,activeitem:!1,closeTimer:!1,bodyClickHandlerAttached:!1,page:1,keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38},init:function(t,e){var s=this;this.gbSearch;var i=this.opts=l.extend({},a,e);(t.gbSearchObject=this).el=l(t),this.el.attr("autocomplete","off"),this.result=this.el.parent().find(i.resultsContainer),0==this.result.size()&&(this.result=l(i.resultsContainer)),l(this.result).on("click","a.ajaxify",function(t){s.closeTimer&&clearTimeout(s.closeTimer),t.preventDefault(),s.el.closest(s.opts.loadingClassContainer).addClass(s.opts.loadingClass),s.el.next(".searchbox-loading").show(),s.result.load(l(this).attr("href"),null,function(t){s.el.closest(s.opts.loadingClassContainer).removeClass(s.opts.loadingClass),s.el.next(".searchbox-loading").hide(),s.initMenus(),"function"==typeof s.opts.success&&s.opts.success(t,s)}),s.result.show(),s.el.focus()}),l(this.result).on("click",".wapager",function(t){s.closeTimer&&clearTimeout(s.closeTimer);var e=l(this).data("page");if(e)return t.preventDefault(),s.lastvalue="",s.executeSearch(e),!1}),i.url?this.url=i.url:this.url=this.el.closest("form").attr("action"),null==this.url&&alert("form action undefined"),this.url,""==t.value&&i.defaultText&&(this.el.val(i.defaultText),this.el.addClass("defaulttext")),this.elForm=this.el.closest("form"),0<this.elForm.size()&&(this.oldFormSubmit=this.elForm[0].onsubmit,this.elForm[0].onsubmit=null,this.elForm.submit(function(t){return s.select()||0<s.activeSearches||s.oldFormSubmit&&s.oldFormSubmit.call(s.elForm[0]),!1})),this.el.bind("focus",function(){l(this).val()==s.opts.defaultText?i.defaultText&&(l(this).val(""),l(this).removeClass("defaulttext")):(s.lastvalue&&(s.initMenus(),s.attachBodyClickHandler(),s.result.fadeIn("fast")),s.activeitem=!1)}),this.el.bind("blur",function(){""==l(this).val()&&i.defaultText&&(l(this).addClass("defaulttext"),l(this).val(s.opts.defaultText)),i.closeOnBlur&&(s.closeTimer=setTimeout(function(){s.closeMenu()},500))}),this.el.bind("keyup",function(t){var e=t||window.event;switch(e.keyCode){case s.keyCode.UP:s.focusUp();break;case s.keyCode.DOWN:s.focusDown();break;case s.keyCode.LEFT:s.focusLeft();break;case s.keyCode.RIGHT:s.focusRight();break;case s.keyCode.ENTER:s.select()||e.preventDefault();break;case s.keyCode.TAB:e.preventDefault(),s.focusDown();break;case s.keyCode.ESCAPE:s.closeMenu();break;default:s.executeSearch()}}),this.el.bind("search:gbsearch",function(){s.lastvalue="",s.executeSearch()}),this.el.bind("closemenu:gbsearch",function(){s.closeMenu()})},reset:function(){this.closeMenu(),this.result.html(""),this.el.val(this.opts.defaultText),this.lastvalue="",this.page=1},executeSearch:function(t){this.page=t||1,this.setSearchTimeout()},setSearchTimeout:function(){var t=this;this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=setTimeout(function(){t.searchTimer=!1,t.startSearch()},this.opts.searchDelay)},startSearch:function(t){var s=this;if((t=t||jQuery.trim(this.el.val())).length<this.opts.minChars)return this.cleanSearch(),!1;if(this.activeitem=!1,this.activeitemindex=!1,this.activeitemscolumn=!1,this.menus=!1,this.items=!1,this.activemenu=!1,this.lastvalue&&this.lastvalue==t)return this.lastvalue,!1;if(t==this.opts.defaultText)return!1;this.activeSearches++,this.activeSearches,this.lastvalue=t;var e=null;"function"==typeof this.opts.params&&(e=this.opts.params()),this.el.closest(s.opts.loadingClassContainer).addClass(this.opts.loadingClass),this.el.next(".searchbox-loading").show(),this.el.closest("form").attr("pending",""),l.get(this.url,{query:t,params:e,page:this.page},function(t,e){s.searchResult(t,e)},"html")},cleanSearch:function(){this.menus&&this.closeMenu()},searchResult:function(t){this.activeSearches--,this.activeSearches,this.searchTimer,this.activeSearches||this.searchTimer||(this.el.closest(this.opts.loadingClassContainer).removeClass(this.opts.loadingClass),this.el.next(".searchbox-loading").hide(),this.el.closest("form").removeAttr("pending",""));var e=this;l(".search_results",e.result).size()?(l(".search_results",e.result).hide(),e.result.html(t),e.result.show(),e.initMenus(),l(".search_results",e.result).fadeIn("fast")):(e.result.html(t),e.result.show(),e.initMenus()),"function"==typeof this.opts.success&&this.opts.success(t,this)},attachBodyClickHandler:function(){if(!this.bodyClickHandlerAttached){var a=this;this.bodyClickHandlerAttached=!0,l("body").bind("click.gbsearch",function(t){var e=t||window.event;if("BUTTON"==e.target.tagName)return!0;var s=l(e.target),i=a.el.attr("id");return i&&s.is("#"+i)?void 0:s.closest(a.opts.resultsContainer).size()<=0?(a.closeMenu(),!1):void 0})}},dettachBodyClickHandler:function(){l("body").unbind("click.gbsearch"),this.bodyClickHandlerAttached=!1},initMenus:function(){var t=this;this.menus=this.result.find(".results"),this.menus&&(this.attachBodyClickHandler(),this.opts.bindClick&&this.menus.find(".item").live("click",function(){return t.saveToHistory(),document.location.href=l(this).find("a").eq(0).attr("href"),!1}))},closeMenu:function(){this.menus=!1,this.items=!1,this.activeitem=!1,l(this.opts.resultsContainer).find(".selected").removeClass("selected"),this.activeSearches||(this.el.closest(this.opts.loadingClassContainer).removeClass(this.opts.loadingClass),this.el.next(".searchbox-loading").hide()),this.result.fadeOut("fast"),this.dettachBodyClickHandler()},activate:function(t){if(this.deactivate(),0==l(t).size())return!1;this.activeitem=l(t).addClass("selected");var e=this.activeitem.offset().left,s=new Array,i=0,a=!1;l(this.items).each(function(t){l(this).offset().left==e&&(l(this).hasClass("selected")&&(a=i),s[i]=this,i+=1)}),this.activeitemindex=a,this.activeitemscolumn=l(s)},deactivate:function(){l(this.opts.resultsContainer).find(".selected").removeClass("selected")},focusDown:function(){if(this.menus){if(!this.activeitem){var t=!1;return l(this.menus).each(function(){if(l(this).hasClass("default_active_menu"))return t=l(this),!1}),t&&(this.activemenu=t),this.activemenu||(this.activemenu=this.menus[0]),this.setMenuItems(this.activemenu),void this.activate(this.items.eq(0))}0==this.activeitemscolumn.eq(this.activeitemindex+1).size()?this.activate(this.activeitemscolumn.eq(0)):this.activate(this.activeitemscolumn.eq(this.activeitemindex+1))}},focusUp:function(){if(this.menus){if(!this.activeitem){var t=!1;return l(this.menus).each(function(){if(l(this).hasClass("default_active_menu"))return t=l(this),!1}),t&&(this.activemenu=t),this.activemenu||(this.activemenu=this.menus[0]),this.setMenuItems(this.activemenu),void this.activate(this.items.eq(0))}0==this.activeitemindex?this.activate(this.activeitemscolumn.last()):this.activate(this.activeitemscolumn.eq(this.activeitemindex-1))}},focusLeft:function(){if(this.menus){if(!this.activeitem)return this.activemenu=this.menus[0],this.setMenuItems(this.activemenu),void this.activate(this.items.eq(0));var t,e,s=this.activeitem.offset(),i=this.getMenuColumnsElements(this.items,s.left,"left");if(0<i.size())return t=this.findNextRequestedElement(i,s),void this.activate(t);0==l(this.activemenu).index()?this.activemenu=l(this.menus).last():this.activemenu=l(this.menus).eq(l(this.activemenu).index()-1),this.setMenuItems(this.activemenu);var a=this.getCountMenuColumns(this.items);if(1==a)i=this.items;else for(var n=0;n<=a&&(e=this.items.eq(n).offset(),!(0<(i=this.getMenuColumnsElements(this.items,e.left,"right2")).size()));)n++;return t=this.findNextRequestedElement(i,s),void this.activate(t)}},focusRight:function(){if(this.menus){if(!this.activeitem)return this.activemenu=this.menus.last(),this.setMenuItems(this.activemenu),void this.activate(this.items.eq(0));var t,e,s=this.activeitem.offset(),i=this.getMenuColumnsElements(this.items,s.left+this.activeitem.width(),"right");if(0<i.size())return t=this.findNextRequestedElement(i,s,!0),void this.activate(t);l(this.activemenu).index()==this.menus.last().index()?this.activemenu=l(this.menus).eq(0):this.activemenu=l(this.menus).eq(l(this.activemenu).index()+1),this.setMenuItems(this.activemenu);var a=this.getCountMenuColumns(this.items);if(1==a)i=this.items;else for(var n=0;n<=a&&(e=this.items.eq(n).offset(),!(0<(i=this.getMenuColumnsElements(this.items,e.left,"left")).size()));)n++;return t=this.findNextRequestedElement(i,s),void this.activate(t)}},saveToHistory:function(){if(this.opts.saveToHistory){var t=jQuery.trim(this.el.val());"function"==typeof history.pushState&&history.pushState({val:t},null,"/search/term/"+encodeURI(t))}},select:function(){return!!this.menus&&(!!this.activeitem&&(this.saveToHistory(),document.location.href=this.activeitem.find("a").eq(0).attr("href"),!0))},setMenuItems:function(t){this.items=l(t).find(".item");var e=this;this.items.each(function(){l(this).bind("mouseover",function(){l(this).hasClass("selected")||(e.setMenuItems(l(t)),e.activate(this))})})},getMenuColumnsElements:function(t,s,i){var a=new Array,n=0;return l(t).each(function(){var t,e;"left"==i?(t=l(this).offset().left)<s&&(a[n]=this,n++):"right"==i?(e=(t=l(this).offset().left)+l(this).width(),s<e&&s<t&&(a[n]=this,n++)):"right2"==i&&(e=(t=l(this).offset().left)+l(this).width(),s<e&&(a[n]=this,n++))}),l(a)},findNextRequestedElement:function(t,s,i){var a=null,n=null,h=s.top;return l(t).each(function(){var t=l(this).offset(),e=Math.abs(s.top-t.top);if((null==a||e<=a)&&(a=e,n=l(this),i&&h==t.top))return!1}),n},getCountMenuColumns:function(t){if(!t.size())return 0;var i=t.eq(0).offset().left,a=t.eq(0).offset().top,n=1;return l(t).each(function(t){var e=l(this).offset();if(e.top>a)return!1;var s=e.left;i<s&&(n++,i=s)}),n}},e.fn.init.prototype=e.fn}(jQuery);
;/*
 * jQuery Form Plugin
 * version: 3.50.0-2014.02.05
 * Requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{factory((typeof(jQuery)!='undefined')?jQuery:window.Zepto);}}
(function($){"use strict";var feature={};feature.fileapi=$("<input type='file'/>").get(0).files!==undefined;feature.formdata=window.FormData!==undefined;var hasProp=!!$.fn.prop;$.fn.attr2=function(){if(!hasProp){return this.attr.apply(this,arguments);}
var val=this.prop.apply(this,arguments);if((val&&val.jquery)||typeof val==='string'){return val;}
return this.attr.apply(this,arguments);};$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}
var method,action,url,$form=this;if(typeof options=='function'){options={success:options};}
else if(options===undefined){options={};}
method=options.type||this.attr2('method');action=options.url||this.attr2('action');url=(typeof action==='string')?$.trim(action):'';url=url||window.location.href||'';if(url){url=(url.match(/^([^#]+)/)||[])[1];}
options=$.extend(true,{url:url,success:$.ajaxSettings.success,type:method||$.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},options);var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}
if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}
var traditional=options.traditional;if(traditional===undefined){traditional=$.ajaxSettings.traditional;}
var elements=[];var qx,a=this.formToArray(options.semantic,elements);if(options.data){options.extraData=options.data;qx=$.param(options.data,traditional);}
if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}
this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}
var q=$.param(a,traditional);if(qx){q=(q?(q+'&'+qx):qx);}
if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}
else{options.data=q;}
var callbacks=[];if(options.resetForm){callbacks.push(function(){$form.resetForm();});}
if(options.clearForm){callbacks.push(function(){$form.clearForm(options.includeHidden);});}
if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?'replaceWith':'html';$(options.target)[fn](data).each(oldSuccess,arguments);});}
else if(options.success){callbacks.push(options.success);}
options.success=function(data,status,xhr){var context=options.context||this;for(var i=0,max=callbacks.length;i<max;i++){callbacks[i].apply(context,[data,status,xhr||$form,$form]);}};if(options.error){var oldError=options.error;options.error=function(xhr,status,error){var context=options.context||this;oldError.apply(context,[xhr,status,error,$form]);};}
if(options.complete){var oldComplete=options.complete;options.complete=function(xhr,status){var context=options.context||this;oldComplete.apply(context,[xhr,status,$form]);};}
var fileInputs=$('input[type=file]:enabled',this).filter(function(){return $(this).val()!=='';});var hasFileInputs=fileInputs.length>0;var mp='multipart/form-data';var multipart=($form.attr('enctype')==mp||$form.attr('encoding')==mp);var fileAPI=feature.fileapi&&feature.formdata;log("fileAPI :"+fileAPI);var shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;var jqxhr;if(options.iframe!==false&&(options.iframe||shouldUseFrame)){if(options.closeKeepAlive){$.get(options.closeKeepAlive,function(){jqxhr=fileUploadIframe(a);});}
else{jqxhr=fileUploadIframe(a);}}
else if((hasFileInputs||multipart)&&fileAPI){jqxhr=fileUploadXhr(a);}
else{jqxhr=$.ajax(options);}
$form.removeData('jqxhr').data('jqxhr',jqxhr);for(var k=0;k<elements.length;k++){elements[k]=null;}
this.trigger('form-submit-notify',[this,options]);return this;function deepSerialize(extraData){var serialized=$.param(extraData,options.traditional).split('&');var len=serialized.length;var result=[];var i,part;for(i=0;i<len;i++){serialized[i]=serialized[i].replace(/\+/g,' ');part=serialized[i].split('=');result.push([decodeURIComponent(part[0]),decodeURIComponent(part[1])]);}
return result;}
function fileUploadXhr(a){var formdata=new FormData();for(var i=0;i<a.length;i++){formdata.append(a[i].name,a[i].value);}
if(options.extraData){var serializedData=deepSerialize(options.extraData);for(i=0;i<serializedData.length;i++){if(serializedData[i]){formdata.append(serializedData[i][0],serializedData[i][1]);}}}
options.data=null;var s=$.extend(true,{},$.ajaxSettings,options,{contentType:false,processData:false,cache:false,type:method||'POST'});if(options.uploadProgress){s.xhr=function(){var xhr=$.ajaxSettings.xhr();if(xhr.upload){xhr.upload.addEventListener('progress',function(event){var percent=0;var position=event.loaded||event.position;var total=event.total;if(event.lengthComputable){percent=Math.ceil(position/total*100);}
options.uploadProgress(event,position,total,percent);},false);}
return xhr;};}
s.data=null;var beforeSend=s.beforeSend;s.beforeSend=function(xhr,o){if(options.formData){o.data=options.formData;}
else{o.data=formdata;}
if(beforeSend){beforeSend.call(this,xhr,o);}};return $.ajax(s);}
function fileUploadIframe(a){var form=$form[0],el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle;var deferred=$.Deferred();deferred.abort=function(status){xhr.abort(status);};if(a){for(i=0;i<elements.length;i++){el=$(elements[i]);if(hasProp){el.prop('disabled',false);}
else{el.removeAttr('disabled');}}}
s=$.extend(true,{},$.ajaxSettings,options);s.context=s.context||s;id='jqFormIO'+(new Date().getTime());if(s.iframeTarget){$io=$(s.iframeTarget);n=$io.attr2('name');if(!n){$io.attr2('name',id);}
else{id=n;}}
else{$io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />');$io.css({position:'absolute',top:'-1000px',left:'-1000px'});}
io=$io[0];xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e=(status==='timeout'?'timeout':'aborted');log('aborting upload... '+e);this.aborted=1;try{if(io.contentWindow.document.execCommand){io.contentWindow.document.execCommand('Stop');}}
catch(ignore){}
$io.attr('src',s.iframeSrc);xhr.error=e;if(s.error){s.error.call(s.context,xhr,e,status);}
if(g){$.event.trigger("ajaxError",[xhr,s,e]);}
if(s.complete){s.complete.call(s.context,xhr,e);}}};g=s.global;if(g&&0===$.active++){$.event.trigger("ajaxStart");}
if(g){$.event.trigger("ajaxSend",[xhr,s]);}
if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global){$.active--;}
deferred.reject();return deferred;}
if(xhr.aborted){deferred.reject();return deferred;}
sub=form.clk;if(sub){n=sub.name;if(n&&!sub.disabled){s.extraData=s.extraData||{};s.extraData[n]=sub.value;if(sub.type=="image"){s.extraData[n+'.x']=form.clk_x;s.extraData[n+'.y']=form.clk_y;}}}
var CLIENT_TIMEOUT_ABORT=1;var SERVER_ABORT=2;function getDoc(frame){var doc=null;try{if(frame.contentWindow){doc=frame.contentWindow.document;}}catch(err){log('cannot get iframe.contentWindow document: '+err);}
if(doc){return doc;}
try{doc=frame.contentDocument?frame.contentDocument:frame.document;}catch(err){log('cannot get iframe.contentDocument: '+err);doc=frame.document;}
return doc;}
var csrf_token=$('meta[name=csrf-token]').attr('content');var csrf_param=$('meta[name=csrf-param]').attr('content');if(csrf_param&&csrf_token){s.extraData=s.extraData||{};s.extraData[csrf_param]=csrf_token;}
function doSubmit(){var t=$form.attr2('target'),a=$form.attr2('action'),mp='multipart/form-data',et=$form.attr('enctype')||$form.attr('encoding')||mp;form.setAttribute('target',id);if(!method||/post/i.test(method)){form.setAttribute('method','POST');}
if(a!=s.url){form.setAttribute('action',s.url);}
if(!s.skipEncodingOverride&&(!method||/post/i.test(method))){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}
if(s.timeout){timeoutHandle=setTimeout(function(){timedOut=true;cb(CLIENT_TIMEOUT_ABORT);},s.timeout);}
function checkState(){try{var state=getDoc(io).readyState;log('state = '+state);if(state&&state.toLowerCase()=='uninitialized'){setTimeout(checkState,50);}}
catch(e){log('Server abort: ',e,' (',e.name,')');cb(SERVER_ABORT);if(timeoutHandle){clearTimeout(timeoutHandle);}
timeoutHandle=undefined;}}
var extraInputs=[];try{if(s.extraData){for(var n in s.extraData){if(s.extraData.hasOwnProperty(n)){if($.isPlainObject(s.extraData[n])&&s.extraData[n].hasOwnProperty('name')&&s.extraData[n].hasOwnProperty('value')){extraInputs.push($('<input type="hidden" name="'+s.extraData[n].name+'">').val(s.extraData[n].value).appendTo(form)[0]);}else{extraInputs.push($('<input type="hidden" name="'+n+'">').val(s.extraData[n]).appendTo(form)[0]);}}}}
if(!s.iframeTarget){$io.appendTo('body');}
if(io.attachEvent){io.attachEvent('onload',cb);}
else{io.addEventListener('load',cb,false);}
setTimeout(checkState,15);try{form.submit();}catch(err){var submitFn=document.createElement('form').submit;submitFn.apply(form);}}
finally{form.setAttribute('action',a);form.setAttribute('enctype',et);if(t){form.setAttribute('target',t);}else{$form.removeAttr('target');}
$(extraInputs).remove();}}
if(s.forceSync){doSubmit();}
else{setTimeout(doSubmit,10);}
var data,doc,domCheckCount=50,callbackProcessed;function cb(e){if(xhr.aborted||callbackProcessed){return;}
doc=getDoc(io);if(!doc){log('cannot access response document');e=SERVER_ABORT;}
if(e===CLIENT_TIMEOUT_ABORT&&xhr){xhr.abort('timeout');deferred.reject(xhr,'timeout');return;}
else if(e==SERVER_ABORT&&xhr){xhr.abort('server abort');deferred.reject(xhr,'error','server abort');return;}
if(!doc||doc.location.href==s.iframeSrc){if(!timedOut){return;}}
if(io.detachEvent){io.detachEvent('onload',cb);}
else{io.removeEventListener('load',cb,false);}
var status='success',errMsg;try{if(timedOut){throw'timeout';}
var isXml=s.dataType=='xml'||doc.XMLDocument||$.isXMLDoc(doc);log('isXml='+isXml);if(!isXml&&window.opera&&(doc.body===null||!doc.body.innerHTML)){if(--domCheckCount){log('requeing onLoad callback, DOM not available');setTimeout(cb,250);return;}}
var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;if(isXml){s.dataType='xml';}
xhr.getResponseHeader=function(header){var headers={'content-type':s.dataType};return headers[header.toLowerCase()];};if(docRoot){xhr.status=Number(docRoot.getAttribute('status'))||xhr.status;xhr.statusText=docRoot.getAttribute('statusText')||xhr.statusText;}
var dt=(s.dataType||'').toLowerCase();var scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName('textarea')[0];if(ta){xhr.responseText=ta.value;xhr.status=Number(ta.getAttribute('status'))||xhr.status;xhr.statusText=ta.getAttribute('statusText')||xhr.statusText;}
else if(scr){var pre=doc.getElementsByTagName('pre')[0];var b=doc.getElementsByTagName('body')[0];if(pre){xhr.responseText=pre.textContent?pre.textContent:pre.innerText;}
else if(b){xhr.responseText=b.textContent?b.textContent:b.innerText;}}}
else if(dt=='xml'&&!xhr.responseXML&&xhr.responseText){xhr.responseXML=toXml(xhr.responseText);}
try{data=httpData(xhr,dt,s);}
catch(err){status='parsererror';xhr.error=errMsg=(err||status);}}
catch(err){log('error caught: ',err);status='error';xhr.error=errMsg=(err||status);}
if(xhr.aborted){log('upload aborted');status=null;}
if(xhr.status){status=(xhr.status>=200&&xhr.status<300||xhr.status===304)?'success':'error';}
if(status==='success'){if(s.success){s.success.call(s.context,data,'success',xhr);}
deferred.resolve(xhr.responseText,'success',xhr);if(g){$.event.trigger("ajaxSuccess",[xhr,s]);}}
else if(status){if(errMsg===undefined){errMsg=xhr.statusText;}
if(s.error){s.error.call(s.context,xhr,status,errMsg);}
deferred.reject(xhr,'error',errMsg);if(g){$.event.trigger("ajaxError",[xhr,s,errMsg]);}}
if(g){$.event.trigger("ajaxComplete",[xhr,s]);}
if(g&&!--$.active){$.event.trigger("ajaxStop");}
if(s.complete){s.complete.call(s.context,xhr,status);}
callbackProcessed=true;if(s.timeout){clearTimeout(timeoutHandle);}
setTimeout(function(){if(!s.iframeTarget){$io.remove();}
else{$io.attr('src',s.iframeSrc);}
xhr.responseXML=null;},100);}
var toXml=$.parseXML||function(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}
else{doc=(new DOMParser()).parseFromString(s,'text/xml');}
return(doc&&doc.documentElement&&doc.documentElement.nodeName!='parsererror')?doc:null;};var parseJSON=$.parseJSON||function(s){return window['eval']('('+s+')');};var httpData=function(xhr,type,s){var ct=xhr.getResponseHeader('content-type')||'',xml=type==='xml'||!type&&ct.indexOf('xml')>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==='parsererror'){if($.error){$.error('parsererror');}}
if(s&&s.dataFilter){data=s.dataFilter(data,type);}
if(typeof data==='string'){if(type==='json'||!type&&ct.indexOf('json')>=0){data=parseJSON(data);}else if(type==="script"||!type&&ct.indexOf("javascript")>=0){$.globalEval(data);}}
return data;};return deferred;}};$.fn.ajaxForm=function(options){options=options||{};options.delegation=options.delegation&&$.isFunction($.fn.on);if(!options.delegation&&this.length===0){var o={s:this.selector,c:this.context};if(!$.isReady&&o.s){log('DOM not ready, queuing ajaxForm');$(function(){$(o.s,o.c).ajaxForm(options);});return this;}
log('terminating; zero elements found by selector'+($.isReady?'':' (DOM not ready)'));return this;}
if(options.delegation){$(document).off('submit.form-plugin',this.selector,doAjaxSubmit).off('click.form-plugin',this.selector,captureSubmittingElement).on('submit.form-plugin',this.selector,options,doAjaxSubmit).on('click.form-plugin',this.selector,options,captureSubmittingElement);return this;}
return this.ajaxFormUnbind().bind('submit.form-plugin',options,doAjaxSubmit).bind('click.form-plugin',options,captureSubmittingElement);};function doAjaxSubmit(e){var options=e.data;if(!e.isDefaultPrevented()){e.preventDefault();$(e.target).ajaxSubmit(options);}}
function captureSubmittingElement(e){var target=e.target;var $el=$(target);if(!($el.is("[type=submit],[type=image]"))){var t=$el.closest('[type=submit]');if(t.length===0){return;}
target=t[0];}
var form=this;form.clk=target;if(target.type=='image'){if(e.offsetX!==undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop;}}
setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},100);}
$.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin');};$.fn.formToArray=function(semantic,elements){var a=[];if(this.length===0){return a;}
var form=this[0];var formId=this.attr('id');var els=semantic?form.getElementsByTagName('*'):form.elements;var els2;if(els&&!/MSIE [678]/.test(navigator.userAgent)){els=$(els).get();}
if(formId){els2=$(':input[form='+formId+']').get();if(els2.length){els=(els||[]).concat(els2);}}
if(!els||!els.length){return a;}
var i,j,n,v,el,max,jmax;for(i=0,max=els.length;i<max;i++){el=els[i];n=el.name;if(!n||el.disabled){continue;}
if(semantic&&form.clk&&el.type=="image"){if(form.clk==el){a.push({name:n,value:$(el).val(),type:el.type});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}
continue;}
v=$.fieldValue(el,true);if(v&&v.constructor==Array){if(elements){elements.push(el);}
for(j=0,jmax=v.length;j<jmax;j++){a.push({name:n,value:v[j]});}}
else if(feature.fileapi&&el.type=='file'){if(elements){elements.push(el);}
var files=el.files;if(files.length){for(j=0;j<files.length;j++){a.push({name:n,value:files[j],type:el.type});}}
else{a.push({name:n,value:'',type:el.type});}}
else if(v!==null&&typeof v!='undefined'){if(elements){elements.push(el);}
a.push({name:n,value:v,type:el.type,required:el.required});}}
if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name;if(n&&!input.disabled&&input.type=='image'){a.push({name:n,value:$input.val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}
return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n){return;}
var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++){a.push({name:n,value:v[i]});}}
else if(v!==null&&typeof v!='undefined'){a.push({name:this.name,value:v});}});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length)){continue;}
if(v.constructor==Array){$.merge(val,v);}
else{val.push(v);}}
return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(successful===undefined){successful=true;}
if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1)){return null;}
if(tag=='select'){var index=el.selectedIndex;if(index<0){return null;}
var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v){v=(op.attributes&&op.attributes.value&&!(op.attributes.value.specified))?op.text:op.value;}
if(one){return v;}
a.push(v);}}
return a;}
return $(el).val();};$.fn.clearForm=function(includeHidden){return this.each(function(){$('input,select,textarea',this).clearFields(includeHidden);});};$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(re.test(t)||tag=='textarea'){this.value='';}
else if(t=='checkbox'||t=='radio'){this.checked=false;}
else if(tag=='select'){this.selectedIndex=-1;}
else if(t=="file"){if(/MSIE/.test(navigator.userAgent)){$(this).replaceWith($(this).clone(true));}else{$(this).val('');}}
else if(includeHidden){if((includeHidden===true&&/hidden/.test(t))||(typeof includeHidden=='string'&&$(this).is(includeHidden))){this.value='';}}});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType)){this.reset();}});};$.fn.enable=function(b){if(b===undefined){b=true;}
return this.each(function(){this.disabled=!b;});};$.fn.selected=function(select){if(select===undefined){select=true;}
return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio'){this.checked=select;}
else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}
this.selected=select;}});};$.fn.ajaxSubmit.debug=false;function log(){if(!$.fn.ajaxSubmit.debug){return;}
var msg='[jquery.form] '+Array.prototype.join.call(arguments,'');if(window.console&&window.console.log){window.console.log(msg);}
else if(window.opera&&window.opera.postError){window.opera.postError(msg);}}}));
;"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(l){l.extend(l.fn,{validate:function(t){if(this.length){var s=l.data(this[0],"validator");return s||(this.attr("novalidate","novalidate"),s=new l.validator(t,this[0]),l.data(this[0],"validator",s),s.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){s.settings.submitHandler&&(s.submitButton=t.target),l(t.target).hasClass("cancel")&&(s.cancelSubmit=!0),void 0!==l(t.target).attr("formnovalidate")&&(s.cancelSubmit=!0)}),this.submit(function(i){function t(){var t,e;return!s.settings.submitHandler||(s.submitButton&&(t=l("<input type='hidden'/>").attr("name",s.submitButton.name).val(l(s.submitButton).val()).appendTo(s.currentForm)),e=s.settings.submitHandler.call(s,s.currentForm,i),s.submitButton&&t.remove(),void 0!==e&&e)}return s.settings.debug&&i.preventDefault(),s.cancelSubmit?(s.cancelSubmit=!1,t()):s.form()?s.pendingRequest?!(s.formSubmitted=!0):t():(s.focusInvalid(),!1)})),s)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,e;return l(this[0]).is("form")?t=this.validate().form():(t=!0,e=l(this[0].form).validate(),this.each(function(){t=e.element(this)&&t})),t},removeAttrs:function(t){var i={},s=this;return l.each(t.split(/\s/),function(t,e){i[e]=s.attr(e),s.removeAttr(e)}),i},rules:function(t,e){var i,s,r,n,a,o,u=this[0];if(t)switch(s=(i=l.data(u.form,"validator").settings).rules,r=l.validator.staticRules(u),t){case"add":l.extend(r,l.validator.normalizeRule(e)),delete r.messages,s[u.name]=r,e.messages&&(i.messages[u.name]=l.extend(i.messages[u.name],e.messages));break;case"remove":return e?(o={},l.each(e.split(/\s/),function(t,e){o[e]=r[e],delete r[e],"required"===e&&l(u).removeAttr("aria-required")}),o):(delete s[u.name],r)}return(n=l.validator.normalizeRules(l.extend({},l.validator.classRules(u),l.validator.attributeRules(u),l.validator.dataRules(u),l.validator.staticRules(u)),u)).required&&(a=n.required,delete n.required,n=l.extend({required:a},n),l(u).attr("aria-required","true")),n.remote&&(a=n.remote,delete n.remote,n=l.extend(n,{remote:a})),n}}),l.extend(l.expr[":"],{blank:function(t){return!l.trim(""+l(t).val())},filled:function(t){return!!l.trim(""+l(t).val())},unchecked:function(t){return!l(t).prop("checked")}}),l.validator=function(t,e){this.settings=l.extend(!0,{},l.validator.defaults,t),this.currentForm=e,this.init()},l.validator.format=function(i,t){return 1===arguments.length?function(){var t=l.makeArray(arguments);return t.unshift(i),l.validator.format.apply(this,t)}:(2<arguments.length&&t.constructor!==Array&&(t=l.makeArray(arguments).slice(1)),t.constructor!==Array&&(t=[t]),l.each(t,function(t,e){i=i.replace(new RegExp("\\{"+t+"\\}","g"),function(){return e})}),i)},l.extend(l.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:l([]),errorLabelContainer:l([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){9===e.which&&""===this.elementValue(t)||(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(t,e,i){"radio"===t.type?this.findByName(t.name).addClass(e).removeClass(i):l(t).addClass(e).removeClass(i)},unhighlight:function(t,e,i){"radio"===t.type?this.findByName(t.name).removeClass(e).addClass(i):l(t).removeClass(e).addClass(i)}},setDefaults:function(t){l.extend(l.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:l.validator.format("Please enter no more than {0} characters."),minlength:l.validator.format("Please enter at least {0} characters."),rangelength:l.validator.format("Please enter a value between {0} and {1} characters long."),range:l.validator.format("Please enter a value between {0} and {1}."),max:l.validator.format("Please enter a value less than or equal to {0}."),min:l.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=l(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||l(this.currentForm),this.containers=l(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,s=this.groups={};function t(t){var e=l.data(this[0].form,"validator"),i="on"+t.type.replace(/^validate/,""),s=e.settings;s[i]&&!this.is(s.ignore)&&s[i].call(e,this[0],t)}l.each(this.settings.groups,function(i,t){"string"==typeof t&&(t=t.split(/\s/)),l.each(t,function(t,e){s[e]=i})}),i=this.settings.rules,l.each(i,function(t,e){i[t]=l.validator.normalizeRule(e)}),l(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",t).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",t),this.settings.invalidHandler&&l(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),l(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),l.extend(this.submitted,this.errorMap),this.invalid=l.extend({},this.errorMap),this.valid()||l(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(t){var e=this.clean(t),i=this.validationTargetFor(e),s=!0;return void 0===(this.lastElement=i)?delete this.invalid[e.name]:(this.prepareElement(i),this.currentElements=l(i),(s=!1!==this.check(i))?delete this.invalid[i.name]:this.invalid[i.name]=!0),l(t).attr("aria-invalid",!s),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),s},showErrors:function(e){if(e){for(var t in l.extend(this.errorMap,e),this.errorList=[],e)this.errorList.push({message:e[t],element:this.findByName(t)[0]});this.successList=l.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){l.fn.resetForm&&l(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{l(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===l.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var t=this,e={};return l(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in e||!t.objectLength(l(this).rules()))&&(e[this.name]=!0)})},clean:function(t){return l(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return l(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=l([]),this.toHide=l([]),this.currentElements=l([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(t){var e,i=l(t),s=t.type;return"radio"===s||"checkbox"===s?l("input[name='"+t.name+"']:checked").val():"number"===s&&void 0!==t.validity?!t.validity.badInput&&i.val():"string"==typeof(e=i.val())?e.replace(/\r/g,""):e},check:function(e){e=this.validationTargetFor(this.clean(e));var t,i,s,r=l(e).rules(),n=l.map(r,function(t,e){return e}).length,a=!1,o=this.elementValue(e);for(i in r){s={method:i,parameters:r[i]};try{if("dependency-mismatch"===(t=l.validator.methods[i].call(this,o,e,s.parameters))&&1===n){a=!0;continue}if(a=!1,"pending"===t)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!t)return this.formatAndAdd(e,s),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+s.method+"' method.",t),t}}if(!a)return this.objectLength(r)&&this.successList.push(e),!0},customDataMessage:function(t,e){return l(t).data("msg"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())||l(t).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(t,e){return this.findDefined(this.customMessage(t.name,e),this.customDataMessage(t,e),!this.settings.ignoreTitle&&t.title||void 0,l.validator.messages[e],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,e){var i=this.defaultMessage(t,e.method),s=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,e.parameters,t):s.test(i)&&(i=l.validator.format(i.replace(s,"{$1}"),e.parameters)),this.errorList.push({message:i,element:t,method:e.method}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return l(this.errorList).map(function(){return this.element})},showLabel:function(t,e){var i,s,r,n=this.errorsFor(t),a=this.idOrName(t),o=l(t).attr("aria-describedby");n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.html(e)):(i=n=l("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass).html(e||""),this.settings.wrapper&&(i=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement(i,l(t)):i.insertAfter(t),n.is("label")?n.attr("for",a):0===n.parents("label[for='"+a+"']").length&&(r=n.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),o?o.match(new RegExp("\\b"+r+"\\b"))||(o+=" "+r):o=r,l(t).attr("aria-describedby",o),(s=this.groups[t.name])&&l.each(this.groups,function(t,e){e===s&&l("[name='"+t+"']",this.currentForm).attr("aria-describedby",n.attr("id"))}))),!e&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,t)),this.toShow=this.toShow.add(n)},errorsFor:function(t){var e=this.idOrName(t),i=l(t).attr("aria-describedby"),s="label[for='"+e+"'], label[for='"+e+"'] *";return i&&(s=s+", #"+i.replace(/\s+/g,", #")),this.errors().filter(s)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),l(t).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(t){return l(this.currentForm).find("[name='"+t+"']")},getLength:function(t,e){switch(e.nodeName.toLowerCase()){case"select":return l("option:selected",e).length;case"input":if(this.checkable(e))return this.findByName(e.name).filter(":checked").length}return t.length},depend:function(t,e){return!this.dependTypes[_typeof(t)]||this.dependTypes[_typeof(t)](t,e)},dependTypes:{boolean:function(t){return t},string:function(t,e){return!!l(t,e.form).length},function:function(t,e){return t(e)}},optional:function(t){var e=this.elementValue(t);return!l.validator.methods.required.call(this,e,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(t,e){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(l(this.currentForm).submit(),this.formSubmitted=!1):!e&&0===this.pendingRequest&&this.formSubmitted&&(l(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return l.data(t,"previousValue")||l.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,e){t.constructor===String?this.classRuleSettings[t]=e:l.extend(this.classRuleSettings,t)},classRules:function(t){var e={},i=l(t).attr("class");return i&&l.each(i.split(" "),function(){this in l.validator.classRuleSettings&&l.extend(e,l.validator.classRuleSettings[this])}),e},attributeRules:function(t){var e,i,s={},r=l(t),n=t.getAttribute("type");for(e in l.validator.methods)i="required"===e?(""===(i=t.getAttribute(e))&&(i=!0),!!i):r.attr(e),/min|max/.test(e)&&(null===n||/number|range|text/.test(n))&&(i=Number(i)),i||0===i?s[e]=i:n===e&&"range"!==n&&(s[e]=!0);return s.maxlength&&/-1|2147483647|524288/.test(s.maxlength)&&delete s.maxlength,s},dataRules:function(t){var e,i,s={},r=l(t);for(e in l.validator.methods)void 0!==(i=r.data("rule"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()))&&(s[e]=i);return s},staticRules:function(t){var e={},i=l.data(t.form,"validator");return i.settings.rules&&(e=l.validator.normalizeRule(i.settings.rules[t.name])||{}),e},normalizeRules:function(s,r){return l.each(s,function(t,e){if(!1!==e){if(e.param||e.depends){var i=!0;switch(_typeof(e.depends)){case"string":i=!!l(e.depends,r.form).length;break;case"function":i=e.depends.call(r,r)}i?s[t]=void 0===e.param||e.param:delete s[t]}}else delete s[t]}),l.each(s,function(t,e){s[t]=l.isFunction(e)?e(r):e}),l.each(["minlength","maxlength"],function(){s[this]&&(s[this]=Number(s[this]))}),l.each(["rangelength","range"],function(){var t;s[this]&&(l.isArray(s[this])?s[this]=[Number(s[this][0]),Number(s[this][1])]:"string"==typeof s[this]&&(t=s[this].replace(/[\[\]]/g,"").split(/[\s,]+/),s[this]=[Number(t[0]),Number(t[1])]))}),l.validator.autoCreateRanges&&(null!=s.min&&null!=s.max&&(s.range=[s.min,s.max],delete s.min,delete s.max),null!=s.minlength&&null!=s.maxlength&&(s.rangelength=[s.minlength,s.maxlength],delete s.minlength,delete s.maxlength)),s},normalizeRule:function(t){if("string"==typeof t){var e={};l.each(t.split(/\s/),function(){e[this]=!0}),t=e}return t},addMethod:function(t,e,i){l.validator.methods[t]=e,l.validator.messages[t]=void 0!==i?i:l.validator.messages[t],e.length<3&&l.validator.addClassRules(t,l.validator.normalizeRule(t))},methods:{required:function(t,e,i){if(!this.depend(i,e))return"dependency-mismatch";if("select"!==e.nodeName.toLowerCase())return this.checkable(e)?0<this.getLength(t,e):0<l.trim(t).length;var s=l(e).val();return s&&0<s.length},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i,s,r=0,n=0,a=!1;if((t=t.replace(/\D/g,"")).length<13||19<t.length)return!1;for(i=t.length-1;0<=i;i--)s=t.charAt(i),n=parseInt(s,10),a&&9<(n*=2)&&(n-=9),r+=n,a=!a;return r%10==0},minlength:function(t,e,i){var s=l.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||i<=s},maxlength:function(t,e,i){var s=l.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||s<=i},rangelength:function(t,e,i){var s=l.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||s>=i[0]&&s<=i[1]},min:function(t,e,i){return this.optional(e)||i<=t},max:function(t,e,i){return this.optional(e)||t<=i},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(t,e,i){var s=l(i);return this.settings.onfocusout&&s.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){l(e).valid()}),t===s.val()},remote:function(n,a,t){if(this.optional(a))return"dependency-mismatch";var o,e,u=this.previousValue(a);return this.settings.messages[a.name]||(this.settings.messages[a.name]={}),u.originalMessage=this.settings.messages[a.name].remote,this.settings.messages[a.name].remote=u.message,t="string"==typeof t&&{url:t}||t,u.old===n?u.valid:(u.old=n,(o=this).startRequest(a),(e={})[a.name]=n,l.ajax(l.extend(!0,{url:t,mode:"abort",port:"validate"+a.name,dataType:"json",data:e,context:o.currentForm,success:function(t){var e,i,s,r=!0===t||"true"===t;o.settings.messages[a.name].remote=u.originalMessage,r?(s=o.formSubmitted,o.prepareElement(a),o.formSubmitted=s,o.successList.push(a),delete o.invalid[a.name],o.showErrors()):(e={},i=t||o.defaultMessage(a,"remote"),e[a.name]=u.message=l.isFunction(i)?i(n):i,o.invalid[a.name]=!0,o.showErrors(e)),u.valid=r,o.stopRequest(a,r)}},t)),"pending")}}}),l.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var s,r={};l.ajaxPrefilter?l.ajaxPrefilter(function(t,e,i){var s=t.port;"abort"===t.mode&&(r[s]&&r[s].abort(),r[s]=i)}):(s=l.ajax,l.ajax=function(t){var e=("mode"in t?t:l.ajaxSettings).mode,i=("port"in t?t:l.ajaxSettings).port;return"abort"===e?(r[i]&&r[i].abort(),r[i]=s.apply(this,arguments),r[i]):s.apply(this,arguments)}),l.extend(l.fn,{validateDelegate:function(i,t,s){return this.bind(t,function(t){var e=l(t.target);if(e.is(i))return s.apply(e,arguments)})}})});
(()=>{"use strict";var t={8186:(t,s,e)=>{e.d(s,{Z:()=>o});class o{static init(){window.addEventListener("b:getImageAcceptHeader",(t=>{t.getImageAcceptHeader=this.getImageAcceptHeader()})),window.addEventListener("b:getSupportedImageType",(t=>{t.supportedImageType=this.getSupportedImageType()}))}static getImageAcceptHeader(){const t=document.createElement("canvas");return t.getContext&&t.getContext("2d")&&0===t.toDataURL("image/webp").indexOf("data:image/webp")?"image/webp":"image/jpeg"}static getSupportedImageType(){return"image/webp"===o.getImageAcceptHeader()?"webp":"jpg"}}window.addEventListener("DOMContentLoaded",(()=>{o.init()}))},4515:(t,s,e)=>{e.d(s,{J:()=>o});const o=(t,s=null)=>{const e=new CustomEvent(t,s);return window.dispatchEvent(e),e}},2694:(t,s,e)=>{e.d(s,{Z:()=>l});var o=e(8186),i=e(835),a=e(4515);class l{constructor(){this.options=null,this.xmlHttpRequest=null}abort(){this.xmlHttpRequest.abort()}process(t,s="GET",e=null){if(this.setUrl(t),this.setOptions(e),this.setMethod(s),"POST"===this.method&&0===this.options.postData.length)throw new Error("Please specify postData");null!==this.xmlHttpRequest&&this.xmlHttpRequest.abort(),this.xmlHttpRequest=new XMLHttpRequest,this.initXMLHttpRequest()}setOptions(t){this.options=new i.Z(!0,{},{postData:null,onReady:null,onError:null,onSuccess:null},t)}setMethod(t){return this.method=t,this}initXMLHttpRequest(){if(this.xmlHttpRequest.abort(),this.xmlHttpRequest.open(this.method,this.url,!0),this.xmlHttpRequest.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xmlHttpRequest.setRequestHeader("Accept","text/html;"+o.Z.getImageAcceptHeader()),this.xmlHttpRequest.responseType="json",this.xmlHttpRequest.onreadystatechange=()=>{4===this.xmlHttpRequest.readyState&&("function"==typeof this.options.onReady&&(window.addEventListener("r:ready",this.options.onReady.bind(!1,this.xmlHttpRequest.response),{capture:!0,once:!0}),(0,a.J)("r:ready")),this.xmlHttpRequest.response&&(200===this.xmlHttpRequest.status?"function"==typeof this.options.onSuccess&&(window.addEventListener("r:success",this.options.onSuccess.bind(!1,this.xmlHttpRequest.response),{capture:!0,once:!0}),(0,a.J)("r:success")):"function"==typeof this.options.onError&&(window.addEventListener("r:error",this.options.onError.bind(!1,this.xmlHttpRequest.response),{capture:!0,once:!0}),(0,a.J)("r:error"))))},"POST"===this.method){const t=new FormData;this.options.postData&&Object.keys(this.options.postData).forEach((s=>{const e=this.options.postData[s];t.append(s,e)})),this.xmlHttpRequest.send(t)}else this.xmlHttpRequest.send();return this}setUrl(t){return this.url=t,this}}},835:(t,s,e)=>{e.d(s,{Z:()=>o});class o{constructor(...t){this.target={};let s=!1,e=0;"boolean"==typeof t[0]&&(s=t[0],e++);let i=t=>{for(let e in t)t.hasOwnProperty(e)&&(s&&"[object Object]"===Object.prototype.toString.call(t[e])?this.target[e]=new o(s,this.target[e],t[e]):this.target[e]=t[e])};for(;e<t.length;e++)i(t[e]);return this.target}}},3208:(t,s,e)=>{e.d(s,{Z:()=>i});var o=e(835);class i{constructor(t){return this.options={},this.defaultOptions={type:null,title:null,content:null,bodyClass:null,modalId:null,buttons:{cancel:{label:"Cancel",class:"button-secondary",onClick:null},ok:{label:"Ok",class:"button-primary",onClick:null}},modalBackdropEnable:!0,enableCloseIcon:!0,enableFooter:!0,enableHeader:!0,size:null,onClose:null,onShow:null,onChange:null,onClick:null,showButtons:!1,showDialogOnPosition:0,container:null},this.variables={tabIndex:"-1",modalRole:"dialog",modalIconFontClass:"ic",modalXIconClass:"ic-close",modalClass:"dialog",modalDialogClass:"dialog-modal",modalContentClass:"dialog-content",modalTitleClass:"dialog-title",modalFadeClass:"dialog-fade",modalInClass:"dialog-in",modalBackdropClass:"dialog-backdrop",modalBodyElementClass:"dialog-open",modalHeaderClass:"dialog-header",modalBodyClass:"dialog-body",modalFooterClass:"dialog-footer",modalSizes:["small","medium","large"]},this.options=new o.Z(!0,{},this.defaultOptions,t),this.options.content="string"==typeof this.options.content?this.options.content:this.options.content.outerHTML,this.options.modalBackdropEnable&&this.buildModalBackdrop(),this.buildModal(),this.events(),this.processShow(),this}events(){this.options.enableHeader&&this.options.enableCloseIcon&&(this.modalHeaderClose.removeEventListener("click",this.close.bind(this)),this.modalHeaderClose.addEventListener("click",this.close.bind(this))),"function"==typeof this.options.onClose&&(this.modal.removeEventListener("click",this.options.onClose.bind(!1,this),!0),this.modal.addEventListener("close",this.options.onClose.bind(!1,this),!0)),"function"==typeof this.options.onShow&&(this.modal.addEventListener("load",this.options.onShow.bind(!1,this),{capture:!0,once:!0}),this.modal.dispatchEvent(new CustomEvent("load"))),"function"==typeof this.options.onChange&&(this.modal.removeEventListener("change",this.options.onChange.bind(!1,this),!0),this.modal.addEventListener("change",this.options.onChange.bind(!1,this),!0)),"function"==typeof this.options.onClick&&(this.modal.removeEventListener("click",this.options.onClick.bind(!1,this),!0),this.modal.addEventListener("click",this.options.onClick.bind(!1,this),!0));const t=this.modal.querySelectorAll('[data-dismiss="dialog"]');t&&t.forEach((t=>{t.removeEventListener("click",this.close.bind(this)),t.addEventListener("click",this.close.bind(this))})),window.addEventListener("modal:close",(t=>{if(this.modal)return t.preventDefault(),this.close(),!1}))}buildModal(){return this.modal=document.createElement("div"),this.modal.classList.add(this.variables.modalClass,this.variables.modalFadeClass),this.options.modalId&&(this.modal.id=this.options.modalId),this.modal.setAttribute("tabindex",this.variables.tabIndex),this.modal.setAttribute("role",this.variables.modalRole),this.options.type&&(this.modal.id=`${this.variables.modalClass}-${this.options.type}`),this.modal.append(this.buildModalDialog()),this.options.container?this.options.container.append(this.modal):document.body.append(this.modal),this.modal}buildModalBackdrop(){return this.modalBackdrop=document.createElement("div"),this.modalBackdrop.classList.add(this.variables.modalBackdropClass,this.variables.modalFadeClass),this.modalBackdrop.id=this.options.modalId+"-backdrop",this.options.container?this.options.container.append(this.modalBackdrop):document.body.append(this.modalBackdrop),this.modalBackdrop}buildModalContent(){return this.modalContent=document.createElement("div"),this.modalContent.classList.add(this.variables.modalContentClass),this.options.enableHeader&&this.modalContent.append(this.buildModalHeader()),this.modalContent.append(this.buildModalBody()),this.options.enableFooter&&this.modalContent.append(this.buildModalFooter()),this.modalContent}buildModalDialog(){return this.modalDialog=document.createElement("div"),this.modalDialog.classList.add(this.variables.modalDialogClass),this.options.size&&this.variables.modalSizes.includes(this.options.size)&&this.modalDialog.classList.add(`dialog-${this.options.size}`),this.modalDialog.append(this.buildModalContent()),this.modalDialog}buildModalHeader(){if(this.modalHeader=document.createElement("div"),this.modalHeader.classList.add(this.variables.modalHeaderClass),null===this.options.title&&(this.options.title=document.createElement("div"),this.options.title.classList.add(this.variables.modalTitleClass),this.options.title.innerHTML="&nbsp;"),this.modalHeader.append(this.options.title),this.options.enableCloseIcon){this.modalHeaderClose=document.createElement("button"),this.modalHeaderClose.classList.add("dialog-close","button","button-tertiary","button-ic-o"),this.modalHeaderClose.dataset.dismiss=this.variables.modalClass;const t=document.createElement("i");t.classList.add("ic","ic-close"),t.classList.add(this.variables.modalIconFontClass,this.variables.modalXIconClass),this.modalHeaderClose.append(t),this.modalHeader.append(this.modalHeaderClose)}return this.modalHeader}buildModalBody(){return this.modalBody=document.createElement("div"),this.modalBody.classList.add(this.variables.modalBodyClass),this.options.bodyClass&&this.modalBody.classList.add(this.options.bodyClass),this.modalBody.innerHTML=this.options.content,this.modalBody}buildModalFooter(){return this.modalFooter=document.createElement("div"),this.modalFooter.classList.add(this.variables.modalFooterClass),this.options.showButtons&&this.buildModalFooterButtons(),this.modalFooter}buildModalFooterButtons(){this.options.showButtons&&Object.keys(this.options.buttons).forEach((t=>{const s=this.options.buttons[t];if(!1!==s){const e=document.createElement("a");s.onClick?e.addEventListener("click",s.onClick.bind(!0,this),!0):"cancel"!==t||s.onClick||(e.dataset.dismiss=this.variables.modalClass),e.setAttribute("href","javascript:;"),e.classList.add("button"),s.class?e.classList.add(s.class):e.classList.add("button-secondary"),e.innerText=s.label,this.modalFooter.append(e)}}))}show(){this.modal.classList.add(this.variables.modalInClass),this.modalBackdrop&&this.modalBackdrop.classList.add(this.variables.modalInClass),document.body.classList.add(this.variables.modalBodyElementClass),this.dialogShown=!0}processShow(){const t=this.options.showDialogOnPosition;0===t?this.show():window.onscroll=()=>{window.scrollY>=t&&!this.dialogShown&&this.show()}}close(){this.modal.classList.remove(this.variables.modalInClass),this.modalBackdrop&&this.modalBackdrop.classList.remove(this.variables.modalInClass),this.modal.dispatchEvent(new Event("close")),document.body.classList.remove(this.variables.modalBodyElementClass),setTimeout((()=>{this.modal&&this.modal.remove(),this.modalBackdrop&&this.modalBackdrop.remove()}),500)}hide(){this.modal.classList.remove(this.variables.modalInClass),document.body.classList.remove(this.variables.modalBodyElementClass),this.modalBackdrop.classList.remove(this.variables.modalInClass),this.dialogShown=!1}}}},s={};function e(o){var i=s[o];if(void 0!==i)return i.exports;var a=s[o]={exports:{}};return t[o](a,a.exports,e),a.exports}e.d=(t,s)=>{for(var o in s)e.o(s,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:s[o]})},e.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),(()=>{var t=e(2694),s=e(3208),o=e(4515);class i{constructor(){this.anchorSelectors='[data-trigger="add-review"]',this.anchorLinks=document.querySelectorAll(this.anchorSelectors),this.request=new t.Z,this.events()}events(){if(this.anchorLinks)for(const t of Array.from(this.anchorLinks)){const s=t.getAttribute("href");t.addEventListener("click",(t=>{t.preventDefault(),"0"!==window.userId&&null!==window.userId?this.processRequest(s):(0,o.J)("h:login")}))}}processRequest(t){this.request.process(t,"GET",{onSuccess:s=>{s.redirect_url?window.location.href=s.redirect_url:window.location.href=t},onError:t=>{if(t&&t.code)if(401===t.code)(0,o.J)("h:login");else this.createModal()}})}createModal(){const t=document.createElement("span");t.classList.add("text-left","dialog-title"),t.innerHTML="You can post only one review for a phone.";const e={title:t,modalId:"dialog-add-edit-review",content:"",showButtons:!1};return new s.Z(e)}}window.addEventListener("load",(()=>{new i}))})()})();